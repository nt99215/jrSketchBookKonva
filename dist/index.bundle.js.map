{"version":3,"sources":["webpack:///webpack/bootstrap 8e1392fe2feabd9a0af9","webpack:///./src/data/GameConfig.js","webpack:///./src/manager/LayerManager.js","webpack:///./src/util/utility.js","webpack:///./src/index.js","webpack:///./src/sketchBook/SketchBookKonva.js","webpack:///./src/module/LineDraw.js","webpack:///./src/module/Brush.js","webpack:///./src/module/Airbrush.js","webpack:///./src/module/Crayon.js","webpack:///./src/module/Eraser.js","webpack:///./src/module/Zoom.js","webpack:///./src/module/Move.js","webpack:///./src/module/ClearCanvas.js","webpack:///./src/module/ScreenTone.js","webpack:///./src/module/TextInput.js","webpack:///./src/module/FloodFill.js","webpack:///./src/ui/Cursor.js"],"names":["_tool","_isDrawingMode","_isLineDrawing","_selectedColor","_selectedSize","_drawingHistory","_historyLimit","_defaultTension","_defaultBrushSize","_defaultLineSize","_defaultEraserSize","_defaultColor","_defaultOpacity","_mainStage","_mainDrawLayer","_currentLayer","_drawCursor","_stageSize","width","height","GameConfig","MAIN_STAGE","obj","STAGE_SIZE","MAIN_LAYER","CURRENT_LAYER","DRAW_CURSOR","CURRENT_TOOL","DEFAULT_TENSION","IS_DRAWING_MODE","bool","IS_LINE_DRAWING","SELECTED_COLOR","str","SELECTED_SIZE","num","push","DEFAULT_BRUSH_SIZE","DEFAULT_LINE_SIZE","DEFAULT_ERASER_SIZE","DEFAULT_COLOR","DEFAULT_OPACITY","LayerManager","init","currentLayer","img","Konva","Image","image","canvas","_canvas","add","draw","remove","stageUpdate","Utility","newCtx","document","createElement","getContext","hexToRgb","hexType","hex","replace","value","match","length","r","parseInt","g","b","a","_rgbToHex","rgbToHex","map","x","toString","join","_hexToRgb","m","substring","console","log","s","SketchBookKonva","_id","_stage","_mainLayer","_cursorLayer","$","id","getElementById","toolsOption","brushEl","airBrushEl","crayonEl","fillEl","lineEl","screenToneEl","eraserEl","textEl","zoomEl","clearEl","moveEl","colorEl","sizeEl","opacityEl","zoomSlider","brushTypeEl","eraserTypeEl","lineTypeEl","crayonTypeEl","screenToneTypeEl","_elementArr","el","Brush","Airbrush","Crayon","FloodFill","LineDraw","ScreenTone","TextInput","Eraser","Zoom","Move","ClearCanvas","constructor","layer","_init","Stage","container","Layer","Cursor","onchange","setColor","setSize","setOpacity","getOpacity","name","i","eL","o","onclick","_toolSelect","e","setLineType","_layerClear","_toolsDestroy","prototype","getColor","getSize","destroy","clear","_createImg","imageURL","fromURL","_drawLayer","_this","isPaint","_line","_dashEnabled","_color","_size","_opacity","_dashConfigArr","_lineType","stage","_drawRect","useTool","on","pos","getPointerPosition","Line","points","y","lineCap","opacity","stroke","strokeWidth","dashEnabled","dash","getLineType","_destroy","_move","oldPoints","off","color","size","pop","type","target","substr","_typeConfigArr","_img","_brushType","_clone","_shapeEnable","_imgObj","w","h","_angleRatio","_lineCap","isDrawing","currentLine","evt","getRelativePointerPosition","globalCompositeOperation","getLineCap","tension","newPoints","concat","Rect","rotation","fill","cache","imageDraw","batchDraw","node","transform","getAbsoluteTransform","copy","invert","getStage","point","clone","setLineCap","angle","Math","random","PI","radius","xPos","cos","yPos","sin","c","rect","perfectDrawEnabled","listening","_pattern","_crayonType","_imgSrc","getCrayonImage","attrs","filters","Filters","RGBA","red","green","blue","onload","src","_mode","_currentNum","_lineArr","drawLayer","_defaultViewPort","_minimumViewPort","_maximumViewPort","_currentViewPort","_zoomScale","_zoomScope","sizeSetMouse","preventDefault","oldScale","indexOf","scaleX","newScale","scaleModify","scale","draggable","canvasClear","_patternImage","_patternGroup","_fillRect","_patternType","_patterUrl","Group","fillPatternImage","url","_textarea","_textNode","_defaultText","_fontFamily","ff","Text","fontSize","fontFamily","stageBox","getContainer","getBoundingClientRect","areaPosition","left","top","body","appendChild","text","style","position","focus","addEventListener","updateValue","removeChild","textInput","g_imgData","g_canvasWidth","g_targetColor","FloodFillBack","paintAt","ctx","targetColor","startX","startY","context","_context","getImageData","pixelPos","data","floodFill","putImageData","startR","startG","startB","startA","canvasWidth","newPos","reachLeft","reachRight","drawingBoundLeft","drawingBoundTop","drawingBoundRight","drawingBoundBottom","pixelStack","matchStartColor","colorPixel","arr","_cursorPointer","_layer","_strokeWidth","tool","cursor","Circle","visible"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;;;;;;;;AC7DA,IAAIA,QAAQ,IAAZ;AACA,IAAIC,iBAAiB,KAArB;AACA,IAAIC,iBAAiB,KAArB;AACA,IAAIC,iBAAiB,EAArB;AACA,IAAIC,gBAAgB,CAApB;AACA,IAAIC,kBAAkB,EAAtB;AACA,MAAMC,gBAAgB,EAAtB;;AAEA,MAAMC,kBAAkB,GAAxB;AACA,MAAMC,oBAAoB,EAA1B;AACA,MAAMC,mBAAmB,EAAzB;AACA,MAAMC,qBAAqB,EAA3B;AACA,MAAMC,gBAAgB,SAAtB;AACA,MAAMC,kBAAkB,GAAxB;;AAEA,IAAIC,aAAa,IAAjB;AACA,IAAIC,iBAAiB,IAArB;AACA,IAAIC,gBAAgB,IAApB;AACA,IAAIC,cAAc,IAAlB;AACA,IAAIC,aAAa,EAACC,OAAM,GAAP,EAAYC,QAAO,GAAnB,EAAjB;;AAEe,MAAMC,UAAN,CAAiB;;AAE5B,eAAWC,UAAX,GAAwB;AAAE,eAAOR,UAAP;AAAkB;AAC5C,eAAWQ,UAAX,CAAsBC,GAAtB,EAA2B;AAAET,qBAAaS,GAAb;AAAiB;;AAE9C,eAAWC,UAAX,GAAwB;AAAE,eAAON,UAAP;AAAkB;AAC5C,eAAWM,UAAX,CAAsBD,GAAtB,EAA2B;AAAEL,qBAAaK,GAAb;AAAiB;;AAE9C,eAAWE,UAAX,GAAwB;AAAE,eAAOV,cAAP;AAAsB;AAChD,eAAWU,UAAX,CAAsBF,GAAtB,EAA2B;AAAER,yBAAiBQ,GAAjB;AAAqB;;AAElD,eAAWG,aAAX,GAA2B;AAAE,eAAOV,aAAP;AAAqB;AAClD,eAAWU,aAAX,CAAyBH,GAAzB,EAA8B;AAAEP,wBAAgBO,GAAhB;AAAoB;;AAEpD,eAAWI,WAAX,GAAyB;AAAE,eAAOV,WAAP;AAAmB;AAC9C,eAAWU,WAAX,CAAuBJ,GAAvB,EAA4B;AAAEN,sBAAcM,GAAd;AAAkB;;AAEhD,eAAWK,YAAX,GAA0B;AAAE,eAAO3B,KAAP;AAAa;AACzC,eAAW2B,YAAX,CAAwBL,GAAxB,EAA6B;AAAEtB,gBAAQsB,GAAR;AAAY;;AAE3C,eAAWM,eAAX,GAA6B;AAAE,eAAOrB,eAAP;AAAuB;;AAEtD,eAAWsB,eAAX,GAA6B;AAAE,eAAO5B,cAAP;AAAsB;AACrD,eAAW4B,eAAX,CAA2BC,IAA3B,EAAiC;AAAE7B,yBAAiB6B,IAAjB;AAAsB;;AAEzD,eAAWC,eAAX,GAA6B;AAAE,eAAO7B,cAAP;AAAsB;AACrD,eAAW6B,eAAX,CAA2BD,IAA3B,EAAiC;AAAE5B,yBAAiB4B,IAAjB;AAAsB;;AAEzD,eAAWE,cAAX,GAA4B;AAAE,eAAO7B,cAAP;AAAsB;AACpD,eAAW6B,cAAX,CAA0BC,GAA1B,EAA+B;AAAE9B,yBAAiB8B,GAAjB;AAAqB;;AAEtD,eAAWC,aAAX,GAA2B;AAAE,eAAO9B,aAAP;AAAqB;AAClD,eAAW8B,aAAX,CAAyBC,GAAzB,EAA8B;AAAE/B,wBAAgB+B,GAAhB;AAAoB;;AAEpD,eAAWD,aAAX,GAA2B;AAAE,eAAO7B,eAAP;AAAuB;AACpD,eAAW6B,aAAX,CAAyBZ,GAAzB,EAA8B;AAAEjB,wBAAgB+B,IAAhB,CAAqBd,GAArB;AAA0B;;AAE1D,eAAWe,kBAAX,GAAgC;AAAE,eAAO7B,iBAAP;AAAyB;AAC3D,eAAW8B,iBAAX,GAA+B;AAAE,eAAO7B,gBAAP;AAAwB;AACzD,eAAW8B,mBAAX,GAAiC;AAAE,eAAO7B,kBAAP;AAA0B;AAC7D,eAAW8B,aAAX,GAA2B;AAAE,eAAO7B,aAAP;AAAqB;AAClD,eAAW8B,eAAX,GAA6B;AAAE,eAAO7B,eAAP;AAAuB;AAzC1B,C;;;;;;;;;ACrBhC;AAAA;;AAEe,MAAM8B,YAAN,CAAmB;AAC1BC,aAAKC,YAAL,EAAmB;AACnB,oBAAGA,iBAAiBxB,iEAAUA,CAACI,UAA/B,EACA;AACA,oBAAIT,gBAAgB6B,YAApB;AACA,oBAAIC,MAAM,IAAIC,MAAMC,KAAV,CAAgB;AAClBC,+BAAMjC,cAAckC,MAAd,CAAqBC,OADT;AAElBhC,+BAAME,iEAAUA,CAACG,UAAX,CAAsBL,KAFV;AAGlBC,gCAAOC,iEAAUA,CAACG,UAAX,CAAsBJ;AAHX,iBAAhB,CAAV;AAKAC,iFAAUA,CAACI,UAAX,CAAsB2B,GAAtB,CAA0BN,GAA1B;AACAzB,iFAAUA,CAACI,UAAX,CAAsB4B,IAAtB;AACA;AACAhC,iFAAUA,CAACC,UAAX,CAAsBgC,MAAtB,CAA6BtC,aAA7B;AACA;AACAA,8BAAcsC,MAAd;AACAtC,gCAAgB,IAAhB;AACA;AACH;;AAEDuC,sBAAc;AACV;;;;AAIA;AACA;AACA;AACA;;AAEH;AA9B6B,C;;;;;;;;;ACFnB,MAAMC,OAAN,CAAc;;AAEzB,WAAOC,MAAP,CAActC,KAAd,EAAqBC,MAArB,EAA6B;AACzB,YAAI8B,SAASQ,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAT,eAAO/B,KAAP,GAAeA,KAAf;AACA+B,eAAO9B,MAAP,GAAgBA,MAAhB;AACA,eAAO8B,OAAOU,UAAP,CAAkB,IAAlB,CAAP;AACH;;AAED,WAAOC,QAAP,CAAgBC,OAAhB,EAAyB;AACrB,YAAIC,MAAMD,QAAQE,OAAR,CAAiB,GAAjB,EAAsB,EAAtB,CAAV;AACA,YAAIC,QAAQF,IAAIG,KAAJ,CAAW,WAAX,CAAZ;;AAEA;AACA,YAAKD,MAAME,MAAN,IAAgB,CAArB,EAAyBJ,MAAME,MAAM,CAAN,IAAWA,MAAM,CAAN,CAAX,GAAsBA,MAAM,CAAN,CAAtB,GAAiCA,MAAM,CAAN,CAAjC,GAA4CA,MAAM,CAAN,CAA5C,GAAuDA,MAAM,CAAN,CAA7D;;AAEzBA,gBAAQF,IAAIG,KAAJ,CAAW,cAAX,CAAR;AACA,YAAIE,IAAIC,SAAUJ,MAAM,CAAN,CAAV,EAAoB,EAApB,CAAR;AACA,YAAIK,IAAID,SAAUJ,MAAM,CAAN,CAAV,EAAoB,EAApB,CAAR;AACA,YAAIM,IAAIF,SAAUJ,MAAM,CAAN,CAAV,EAAoB,EAApB,CAAR;;AAEA,eAAO;AACHG,aADG,EACAE,CADA,EACGC,CADH,EACMC,GAAG;AADT,SAAP;AAGH;;AAEDC,cAAUL,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAiB;;AAEb,YAAIG,WAAW,CAACN,CAAD,EAAIE,CAAJ,EAAOC,CAAP,KAAa,MAAM,CAACH,CAAD,EAAIE,CAAJ,EAAOC,CAAP,EAAUI,GAAV,CAAcC,KAAK;AACjD,kBAAMb,MAAMa,EAAEC,QAAF,CAAW,EAAX,CAAZ;AACA,mBAAOd,IAAII,MAAJ,KAAe,CAAf,GAAmB,MAAMJ,GAAzB,GAA+BA,GAAtC;AACH,SAHiC,EAG/Be,IAH+B,CAG1B,EAH0B,CAAlC;;AAKA;AACH;;AAEDC,cAAUhB,GAAV,EAAe;AACXA,YAAIC,OAAJ,CAAY,kCAAZ,EACK,CAACgB,CAAD,EAAIZ,CAAJ,EAAOE,CAAP,EAAUC,CAAV,KAAgB,MAAMH,CAAN,GAAUA,CAAV,GAAcE,CAAd,GAAkBA,CAAlB,GAAsBC,CAAtB,GAA0BA,CAD/C,EAEKU,SAFL,CAEe,CAFf,EAEkBf,KAFlB,CAEwB,OAFxB,EAGKS,GAHL,CAGSC,KAAKP,SAASO,CAAT,EAAY,EAAZ,CAHd;;AAKAM,gBAAQC,GAAR,CAAYpB,GAAZ;AACH;;AA3CwB,C;;;;;;;;;ACA7B;AAAA;AAAA;AACA,IAAIqB,IAAI,IAAIC,4EAAJ,CAAoB,WAApB,CAAR,C;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,GAAJ,EAASC,MAAT,EAAiBC,UAAjB,EAA6BC,YAA7B;;AAEA,IAAIC,IAAI,UAASC,EAAT,EAAY;AAAC,WAAOjC,SAASkC,cAAT,CAAwBD,EAAxB,CAAP;AAAmC,CAAxD;AACA,IAAIE,cAAcH,EAAE,aAAF,CAAlB;AAAA,IACII,UAAUJ,EAAE,OAAF,CADd;AAAA,IAEIK,aAAaL,EAAE,UAAF,CAFjB;AAAA,IAGIM,WAAWN,EAAE,QAAF,CAHf;AAAA,IAIIO,SAASP,EAAE,MAAF,CAJb;AAAA,IAKIQ,SAASR,EAAE,MAAF,CALb;AAAA,IAMIS,eAAeT,EAAE,YAAF,CANnB;AAAA,IAOIU,WAAWV,EAAE,QAAF,CAPf;AAAA,IAQIW,SAASX,EAAE,MAAF,CARb;AAAA,IASIY,SAAQZ,EAAE,MAAF,CATZ;;AAUI;AACAa,UAAUb,EAAE,OAAF,CAXd;AAAA,IAYIc,SAASd,EAAE,MAAF,CAZb;;;AAcI;AACAe,UAAUf,EAAE,QAAF,CAfd;AAAA,IAgBIgB,SAAShB,EAAE,OAAF,CAhBb;AAAA,IAiBIiB,YAAYjB,EAAE,UAAF,CAjBhB;AAAA,IAkBIkB,aAAalB,EAAE,OAAF,CAlBjB;;;AAqBI;;;;AAII;AACJmB,cAAcnB,EAAE,WAAF,CA1BlB;;;AA4BI;AACAoB,eAAepB,EAAE,YAAF,CA7BnB;;;AA+BI;AACAqB,aAAarB,EAAE,UAAF,CAhCjB;;;AAkCI;AACAsB,eAAetB,EAAE,YAAF,CAnCnB;;;AAqCI;AACAuB,mBAAmBvB,EAAE,gBAAF,CAtCvB;;AAwCA,IAAIwB,cAAc,CACd,EAACC,IAAGrB,OAAJ,EAAavE,KAAI6F,8DAAjB,EADc,EAEd,EAACD,IAAGpB,UAAJ,EAAgBxE,KAAI8F,iEAApB,EAFc,EAGd,EAACF,IAAGnB,QAAJ,EAAczE,KAAI+F,+DAAlB,EAHc,EAId,EAACH,IAAGlB,MAAJ,EAAY1E,KAAIgG,mEAAhB,EAJc,EAKd,EAACJ,IAAGjB,MAAJ,EAAY3E,KAAIiG,iEAAhB,EALc,EAMd,EAACL,IAAGhB,YAAJ,EAAkB5E,KAAIkG,mEAAtB,EANc,EAOd,EAACN,IAAGd,MAAJ,EAAY9E,KAAImG,mEAAhB,EAPc,EAQd,EAACP,IAAGf,QAAJ,EAAc7E,KAAIoG,+DAAlB,EARc,EASd,EAACR,IAAGb,MAAJ,EAAY/E,KAAIqG,6DAAhB,EATc,EAUd,EAACT,IAAGX,MAAJ,EAAYjF,KAAIsG,6DAAhB,EAVc,EAWd,EAACV,IAAGZ,OAAJ,EAAahF,KAAIuG,oEAAjB,EAXc,CAAlB;;AAce,MAAMzC,eAAN,CAAsB;AACjC0C,gBAAYpC,EAAZ,EAAgBxE,KAAhB,EAAuBC,MAAvB,EAA+B4G,QAAQ,CAAvC,EAA0C;AACtC1C,cAAMK,EAAN;AACA,aAAKsC,KAAL;AACH;;AAEDA,YAAQ;;AAEJ1C,iBAAS,IAAIxC,MAAMmF,KAAV,CAAgB;AACrBC,uBAAW,WADU;AAErBhH,mBAAME,iEAAUA,CAACG,UAAX,CAAsBL,KAFP;AAGrBC,oBAAOC,iEAAUA,CAACG,UAAX,CAAsBJ;AAHR,SAAhB,CAAT;;AAMAC,yEAAUA,CAACC,UAAX,GAAwBiE,MAAxB;;AAEA;;AAEAC,qBAAa,IAAIzC,MAAMqF,KAAV,EAAb;AACA/G,yEAAUA,CAACI,UAAX,GAAwB+D,UAAxB;AACAD,eAAOnC,GAAP,CAAWoC,UAAX;;AAEAC,uBAAe,IAAI1C,MAAMqF,KAAV,EAAf;AACA7C,eAAOnC,GAAP,CAAWqC,YAAX;;AAEApE,yEAAUA,CAACM,WAAX,GAAyB,IAAI0G,4DAAJ,CAAW9C,MAAX,EAAkBE,YAAlB,CAAzB;;AAIAgB,gBAAQ6B,QAAR,GAAmB,YAAW;AAC1B,gBAAGjH,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwB2G,QAAxB,CAAiC,KAAKtE,KAAtC;AAC/B,SAFD;;AAIAyC,eAAO4B,QAAP,GAAkB,YAAW;AACzB,gBAAGjH,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwB4G,OAAxB,CAAgC,KAAKvE,KAArC;AAC/B,SAFD;;AAIA0C,kBAAU2B,QAAV,GAAqB,YAAW;AAC5B,gBAAGjH,iEAAUA,CAACO,YAAd,EACA;AACIP,iFAAUA,CAACO,YAAX,CAAwB6G,UAAxB,CAAmC,KAAKxE,KAAxC;AACA5C,iFAAUA,CAACO,YAAX,CAAwB8G,UAAxB;AACH;AACJ,SAND;;AAQA9B,mBAAW0B,QAAX,GAAsB,YAAW;AAC7B,gBAAGjH,iEAAUA,CAACO,YAAX,CAAwBmG,WAAxB,CAAoCY,IAApC,KAA6C,MAAhD,EACItH,iEAAUA,CAACO,YAAX,CAAwB4G,OAAxB,CAAgC,KAAKvE,KAArC;AACP,SAHD;;AAMA;;;AAGA,aAAI,IAAI2E,CAAR,IAAa1B,WAAb,EACA;AACI,gBAAI2B,KAAK3B,YAAY0B,CAAZ,EAAezB,EAAxB;AACA,gBAAI2B,IAAK5B,YAAY0B,CAAZ,EAAerH,GAAxB;AACAsH,eAAGE,OAAH,GAAY,MAAK,KAAKC,WAAL,CAAiBH,GAAGlD,EAApB,EAAwBmD,CAAxB,CAAjB;AACH;;AAED;;;AAGAjC,oBAAYyB,QAAZ,GAAuB,UAASW,CAAT,EAAY;AAC/B,gBAAG5H,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwBsH,WAAxB,CAAoCD,CAApC;AAC/B,SAFD;;AAIA;;;AAGAlC,mBAAWuB,QAAX,GAAsB,UAASW,CAAT,EAAY;AAC9B,gBAAG5H,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwBsH,WAAxB,CAAoCD,CAApC;AAC/B,SAFD;;AAIA;;;AAGAjC,qBAAasB,QAAb,GAAwB,UAASW,CAAT,EAAY;AAChC,gBAAG5H,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwBsH,WAAxB,CAAoCD,CAApC;AAC/B,SAFD;;AAIA;;;AAGAhC,yBAAiBqB,QAAjB,GAA4B,UAASW,CAAT,EAAY;AACpC,gBAAG5H,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwBsH,WAAxB,CAAoCD,CAApC;AAC/B,SAFD;;AAIA,aAAKD,WAAL;AAEH;;AAGDA,gBAAYrD,KAAK,EAAjB,EAAqBpE,MAAO6F,8DAA5B,EAAmC;AAC/B;AACA;;AAEA,YAAGzB,OAAO,OAAV,EACA;AACI,iBAAKwD,WAAL;AACA;AACH;AACD,aAAKC,aAAL;;AAEA,YAAGzD,OAAO,MAAP,IAAiBA,OAAO,MAA3B,EACA;AACItE,6EAAUA,CAACS,eAAX,GAA6B,KAA7B;AACAP,gBAAI8H,SAAJ,CAAczG,IAAd,CAAmB2C,MAAnB;AACA;AACH;;AAGDlE,yEAAUA,CAACS,eAAX,GAA6B,IAA7B;AACA;;AAEA,YAAG6D,OAAO,QAAV,EAAoB;AAChBtE,6EAAUA,CAACS,eAAX,GAA6B,KAA7B;AACAP,gBAAI8H,SAAJ,CAAczG,IAAd,CAAmB2C,MAAnB,EAA2BC,UAA3B;AACA;AACH,SAJD,MAKKjE,IAAI8H,SAAJ,CAAczG,IAAd,CAAmB2C,MAAnB;;AAGLkB,gBAAQxC,KAAR,GAAgB1C,IAAI8H,SAAJ,CAAcC,QAAd,EAAhB;AACA5C,eAAOzC,KAAP,GAAe1C,IAAI8H,SAAJ,CAAcE,OAAd,EAAf;AACA5C,kBAAU1C,KAAV,GAAkB1C,IAAI8H,SAAJ,CAAcX,UAAd,EAAlB;AAEH;;AAEDS,kBAAc;AACV5D,eAAOjC,MAAP,CAAcjC,iEAAUA,CAACI,UAAzB;AACA;AACA,YAAGJ,iEAAUA,CAACI,UAAd,EACA;AACIJ,6EAAUA,CAACI,UAAX,CAAsB6B,MAAtB;AACAjC,6EAAUA,CAACI,UAAX,CAAsB+H,OAAtB;AACAnI,6EAAUA,CAACI,UAAX,GAAwB,IAAxB;AACH;AACD,YAAGJ,iEAAUA,CAACK,aAAd,EACA;AACI6D,mBAAOjC,MAAP,CAAcjC,iEAAUA,CAACK,aAAzB;AACAL,6EAAUA,CAACK,aAAX,CAAyB+H,KAAzB;AACApI,6EAAUA,CAACK,aAAX,CAAyB4B,MAAzB;AACAjC,6EAAUA,CAACK,aAAX,CAAyB8H,OAAzB;AACAnI,6EAAUA,CAACK,aAAX,GAA2B,IAA3B;AACH;AACD8D,qBAAa,IAAIzC,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWoC,UAAX;AACAnE,yEAAUA,CAACI,UAAX,GAAwB+D,UAAxB;AACAA,mBAAWnC,IAAX;AACH;;AAIDqG,iBAAa;AACT,cAAMC,WAAW,2BAAjB;AACA,cAAM3B,QAAQ,IAAIjF,MAAMqF,KAAV,EAAd;AACArF,cAAMC,KAAN,CAAY4G,OAAZ,CAAoBD,QAApB,EAA+B1G,KAAD,IAAS;;AAEnC+E,kBAAM5E,GAAN,CAAUH,KAAV;AACA+E,kBAAM3E,IAAN;AACH,SAJD;AAKAkC,eAAOnC,GAAP,CAAW4E,KAAX;AAEH;;AAGDoB,oBAAgB;AACZ,YAAG/H,iEAAUA,CAACO,YAAd,EAA4BP,iEAAUA,CAACO,YAAX,CAAwB4H,OAAxB;AAC/B;;AA1KgC,C;;;;;;;;;ACvErC;AAAA;AAAA;AACA;;AAEA,IAAIjE,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB,EAA+BC,OAA/B,EAAwCC,KAAxC,EAA+CC,YAA/C;AACA,IAAIC,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,MAAM2H,iBAAiB,CAAC,CAAC,CAAD,CAAD,EAAM,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAN,EAAkB,CAAC,CAAD,EAAI,EAAJ,CAAlB,CAAvB;AACA,IAAIC,YAAYD,eAAe,CAAf,CAAhB;;AAEe,MAAM7C,QAAN,CAAe;;AAE1B5E,SAAK2H,KAAL,EAAY;AACRlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC;AACAlI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;AACAG,uBAAe,KAAf;;AAEA,aAAKQ,OAAL;AACH;;AAEDA,cAAU;AACNlF,eAAOmF,EAAP,CAAU,sBAAV,EAAkC,YAAY;AAC1CX,sBAAU,IAAV;AACA,gBAAIY,MAAMpF,OAAOqF,kBAAP,EAAV;AACAZ,oBAAQ,IAAIjH,MAAM8H,IAAV,CAAe;AACnBC,wBAAQ,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,EAAeJ,IAAI/F,CAAnB,EAAsB+F,IAAII,CAA1B,CADW;AAEnB;AACA;AACAC,yBAAQ,OAJW;AAKnBC,yBAAQnB,MAAMpB,UAAN,KAAqB,GALV;AAMnBwC,wBAAQpB,MAAMR,QAAN,EANW;AAOnB6B,6BAAarB,MAAMP,OAAN,EAPM;AAQnB6B,6BAAanB,YARM;AASnBoB,sBAAKvB,MAAMwB,WAAN;AATc,aAAf,CAAR;AAWAzB,uBAAWzG,GAAX,CAAe4G,KAAf;AACH,SAfD;;AAiBAzE,eAAOmF,EAAP,CAAU,kCAAV,EAA8C,MAAK;AAC/CrJ,6EAAUA,CAACM,WAAX,CAAuB4J,QAAvB;AACA,gBAAIZ,MAAMpF,OAAOqF,kBAAP,EAAV;AACAvJ,6EAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC,EAAiDoB,IAAI/F,CAArD,EAAwD+F,IAAII,CAA5D;;AAEAhB,sBAAU,KAAV;AACApH,kFAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAA,yBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,mBAAOnC,GAAP,CAAWyG,UAAX;AACAxI,6EAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACH,SAVD;;AAYAtE,eAAOmF,EAAP,CAAU,qBAAV,EAAiC,YAAY;;AAEzC;AACA,gBAAG,CAACX,OAAJ,EAAa;;AAEb,gBAAIY,MAAMpF,OAAOqF,kBAAP,EAAV;AACAvJ,6EAAUA,CAACM,WAAX,CAAuB6J,KAAvB,CAA6Bb,IAAI/F,CAAjC,EAAoC+F,IAAII,CAAxC;AACA,gBAAIU,YAAYzB,MAAMc,MAAN,EAAhB;AACAd,kBAAMc,MAAN,CAAa,CAACW,UAAU,CAAV,CAAD,EAAeA,UAAU,CAAV,CAAf,EAA6Bd,IAAI/F,CAAjC,EAAoC+F,IAAII,CAAxC,CAAb;AACAlB,uBAAWxG,IAAX;AACH,SAVD;AAWH;;AAGDmG,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAE,kBAAU,KAAV;AACA,YAAGxE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AAGb;;AAGD;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AACVzB,gBAAQyB,IAAR;AACAtB,kBAAUuB,GAAV;AACAvB,kBAAUjI,IAAV,CAAe8H,QAAQ,CAAvB;AACH;AACDZ,cAAU;AAAC,eAAOY,KAAP;AAAc;;AAEzB;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAEhC;;;;AAIAlB,gBAAYD,CAAZ,EAAe;AACX,YAAI6C,OAAO7C,EAAE8C,MAAF,CAASpG,EAAT,CAAYqG,MAAZ,CAAmB,CAAnB,EAAsB/C,EAAE8C,MAAF,CAASpD,IAAT,CAAcxE,MAAd,GAAuB,CAA7C,CAAX;AACA,gBAAQ2H,IAAR;AAEI,iBAAK,QAAL;AACIxB,4BAAY,CAAC,CAAD,CAAZ;AACA;AACJ,iBAAK,KAAL;AACIA,4BAAY,CAAC,CAAD,EAAI,KAAKf,OAAL,KAAiB,CAArB,CAAZ;AACA;AACJ,iBAAK,MAAL;AACIe,4BAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,KAAKf,OAAL,KAAiB,CAAxB,CAAZ;AACA;AACJ;AACIe,4BAAY,CAAC,CAAD,CAAZ;AACA;AAbR;AAeAL,uBAAe6B,SAAS,QAAxB;AACH;;AAEDR,kBAAc;AAAC,eAAOhB,SAAP;AAAkB;;AAvHP,C;;;;;;;;;ACV9B;AAAA;AAAA;AACA;;AAEA,IAAI/E,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB;AACA,IAAII,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,MAAMuJ,iBAAiB,CAAC,CAAC,CAAD,EAAG,CAAH,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAR,EAAoB,CAAC,CAAD,EAAI,EAAJ,CAApB,CAAvB;AACA,IAAIC,IAAJ,EAAUC,UAAV,EAAqBC,MAArB,EAA6BC,YAA7B;AACA,MAAMC,UAAU,EAACC,GAAE,CAAH,EAAMC,GAAE,CAAR,EAAWpI,GAAE,CAAb,EAAhB;AACA,MAAMqI,cAAc,CAApB;AACA,IAAIC,WAAW,OAAf;;AAGe,MAAMtF,KAAN,CAAY;;AAEvBxE,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC;AACAlI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;AACAuC,uBAAe,KAAf;AACA,aAAK5B,OAAL;AACH;;AAGDA,cAAW;AACP,YAAIkC,YAAY,KAAhB;AACA,YAAIC,WAAJ;AACArH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvCF,wBAAY,IAAZ;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA,gBAAG,CAAE8G,YAAL,EACA;AACIO,8BAAc,IAAI7J,MAAM8H,IAAV,CAAe;AACzBK,4BAAQpB,MAAMR,QAAN,EADiB;AAEzB6B,iCAAarB,MAAMP,OAAN,EAFY;AAGzBuB,4BAAQ,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAHiB;AAIzBgC,8CAAyB,aAJA;AAKzB/B,6BAAQlB,MAAMkD,UAAN,EALiB;AAMzBC,6BAAQ5L,iEAAUA,CAACQ,eANM;AAOzBoJ,6BAAQnB,MAAMpB,UAAN,KAAqB;AAPJ,iBAAf,CAAd;;AAUAmB,2BAAWzG,GAAX,CAAewJ,WAAf;AAEH,aAdD,MAgBKA,cAAc,EAAC9B,QAAO,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAAR,EAAd;AAER,SArBD;;AAuBAxF,eAAOmF,EAAP,CAAU,qBAAV,EAAkCmC,GAAD,IAAS;;AAEtC,gBAAIlC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6J,KAAvB,CAA6Bb,IAAI/F,CAAjC,EAAoC+F,IAAII,CAAxC;AACA,gBAAI,CAAC4B,SAAL,EAAgB;AAChB,gBAAG,CAAEN,YAAL,EACA;AACI,oBAAIa,YAAYN,YAAY9B,MAAZ,GAAqBqC,MAArB,CAA4B,CAACxC,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAA5B,CAAhB;AACA6B,4BAAY9B,MAAZ,CAAmBoC,SAAnB;AACH,aAJD,MAMA;AACI,oBAAI3L,MAAM+K,OAAV;AACAJ,uBAAO,IAAInJ,MAAMqK,IAAV,CAAe;AAClBjM,2BAAMkD,SAAS9C,IAAIgL,CAAJ,GAAS,KAAKhD,OAAL,EAAlB,CADY;AAElBnI,4BAAOiD,SAAS9C,IAAIiL,CAAJ,GAAQ,KAAKjD,OAAL,EAAjB,CAFW;AAGlB8D,8BAAS9L,IAAI6C,CAHK;AAIlBkJ,0BAAKxD,MAAMR,QAAN;AAJa,iBAAf,CAAP;;AAOA4C,qBAAKqB,KAAL;AACA,qBAAKC,SAAL,CAAe7C,IAAI/F,CAAnB,EAAsB+F,IAAII,CAA1B;AACH;AACDlB,uBAAW4D,SAAX;AACH,SAxBD;;AA0BAlI,eAAOmF,EAAP,CAAU,kCAAV,EAA+CmC,GAAD,IAAS;;AAEnDxL,6EAAUA,CAACM,WAAX,CAAuB4J,QAAvB;AACA,gBAAIZ,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC,EAAiDoB,IAAI/F,CAArD,EAAwD+F,IAAII,CAA5D;AACA4B,wBAAY,KAAZ;AACAhK,kFAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAA,yBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,mBAAOnC,GAAP,CAAWyG,UAAX;AACAxI,6EAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AAEH,SAXD;AAYH;;AAEDiD,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACAF,kBAAUG,MAAV;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAGD6C,cAAU5I,CAAV,EAAamG,CAAb,EAAgB;AACZqB,iBAASF,KAAK+B,KAAL,CAAW;AAChBrJ,eAAEA,CADc;AAEhBmG,eAAEA,CAFc;AAGhBuC,kBAAKxD,MAAMR,QAAN;AAHW,SAAX,CAAT;;AAMA8C,eAAOmB,KAAP;AACA1D,mBAAWzG,GAAX,CAAegJ,MAAf;AACH;;AAED5C,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAGtE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAGD;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAEhC;;;;AAIA8D,eAAWhM,GAAX,EAAgB;AAAEwK,mBAAWxK,GAAX;AAAgB;AAClC8K,iBAAa;AAAE,eAAON,QAAP;AAAiB;;AAEhC;;;;AAIAxD,gBAAYD,CAAZ,EAAe;AACX,YAAI6C,OAAO7C,EAAE8C,MAAF,CAASpG,EAAT,CAAYqG,MAAZ,CAAmB,CAAnB,EAAsB/C,EAAE8C,MAAF,CAASpD,IAAT,CAAcxE,MAAd,GAAuB,CAA7C,CAAX;AACA,gBAAQ2H,IAAR;AAEI,iBAAK,QAAL;AACI,qBAAKoC,UAAL,CAAgB,OAAhB;AACA7B,+BAAe,KAAf;AACA;AACJ,iBAAK,MAAL;AACI,qBAAK6B,UAAL,CAAgB,QAAhB;AACA7B,+BAAe,KAAf;AACA;AACJ,iBAAK,SAAL;AACIC,wBAAQC,CAAR,GAAY,CAAZ;AACAD,wBAAQE,CAAR,GAAY,CAAZ;AACAF,wBAAQlI,CAAR,GAAY,EAAZ;AACAiI,+BAAe,IAAf;AACA;AACJ,iBAAK,QAAL;AACIC,wBAAQC,CAAR,GAAY,IAAEE,WAAd;AACAH,wBAAQE,CAAR,GAAY,CAAZ;AACAF,wBAAQlI,CAAR,GAAY,CAAZ;AACAiI,+BAAe,IAAf;AACA;AACJ,iBAAK,KAAL;AACIC,wBAAQC,CAAR,GAAY,CAAZ;AACAD,wBAAQE,CAAR,GAAY,IAAEC,WAAd;AACAH,wBAAQlI,CAAR,GAAY,CAAZ;AACAiI,+BAAe,IAAf;AACA;AACJ,iBAAK,OAAL;AACIC,wBAAQC,CAAR,GAAY,CAAZ;AACAD,wBAAQE,CAAR,GAAY,IAAEC,WAAd;AACAH,wBAAQlI,CAAR,GAAY,CAAC,EAAb;AACAiI,+BAAe,IAAf;AACA;;AAjCR;AAoCH;AACDf,kBAAc;AAAE,eAAOa,UAAP;AAAmB;;AApLZ,C;;;;;;;;;ACd3B;AAAA;AAAA;AACA;;AAEA,IAAI5G,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB;AACA,IAAII,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;;AAGe,MAAM2E,QAAN,CAAe;;AAE1BzE,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;;AAEA,aAAKW,OAAL;AACH;;AAGDA,cAAW;;AAEP,YAAIkC,YAAY,KAAhB;AACA,YAAIC,WAAJ;AACArH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvC;AACA;AACAF,wBAAY,IAAZ;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAqH,0BAAc,EAAC9B,QAAO,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ;AACtB;AADc,aAAd;AAEH,SAPD;;AASAxF,eAAOmF,EAAP,CAAU,qBAAV,EAAkCmC,GAAD,IAAS;AACtC;AACA,gBAAI,CAACF,SAAL,EAAgB;AACZ;AACH;;AAED;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA;AACA;AACA,iBAAKiI,SAAL,CAAe7C,IAAI/F,CAAnB,EAAsB+F,IAAII,CAA1B;AAEH,SAZD;;AAcAxF,eAAOmF,EAAP,CAAU,kCAAV,EAA+CmC,GAAD,IAAS;AACnD;AACAF,wBAAY,KAAZ;AACAhK,kFAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAA,yBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,mBAAOnC,GAAP,CAAWyG,UAAX;AACAxI,6EAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACH,SAPD;AAQH;;AAEDiD,+BAA2BY,IAA3B,EAAiC;AAC7B;AACA,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACA;AACAF,kBAAUG,MAAV;;AAEA;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;;AAEA;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAGD6C,cAAU5I,CAAV,EAAamG,CAAb,EAAgB;;AAEZ,YAAIoD,QAAQC,KAAKC,MAAL,KAAgBD,KAAKE,EAArB,GAA0B,CAAtC;AACA,YAAIC,SAASH,KAAKC,MAAL,KAAgB,KAAK9E,OAAL,EAAhB,GAAiC,CAA9C;AACA,YAAIiF,OAAO5J,IAAIwJ,KAAKK,GAAL,CAASN,KAAT,IAAkBI,MAAjC;AACA,YAAIG,OAAO3D,IAAIqD,KAAKO,GAAL,CAASR,KAAT,IAAkBI,MAAjC;AACA,YAAIK,IAAI,KAAKtF,QAAL,EAAR;AACA,YAAIlF,IAAKgK,KAAKC,MAAL,KAAgB,EAAjB,GAAqB,CAA7B;AACA,aAAI,IAAKzF,IAAI,CAAb,EAAgBA,IAAE,CAAlB,EAAqBA,GAArB,EACA;AACI,gBAAIiG,OAAO,IAAI9L,MAAMqK,IAAV,CAAe;AACtBxI,mBAAE4J,IADoB;AAEtBzD,mBAAE2D,IAFoB;AAGtBvN,uBAAMiD,CAHgB;AAItBhD,wBAAOgD,CAJe;AAKtBkJ,sBAAMsB,CALgB;AAMtBE,oCAAmB,KANG;AAOtBC,2BAAU;AAPY,aAAf,CAAX;AASAlF,uBAAWzG,GAAX,CAAeyL,IAAf;AACAhF,uBAAW4D,SAAX;AACH;AAEJ;;AAEDjE,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAGtE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAID;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAvHN,C;;;;;;;;;ACT9B;AAAA;AAAA;AAAA;AACA;AACA;;AAEA,IAAI7E,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB,EAA8BkF,QAA9B,EAAwC5C,MAAxC;AACA,IAAIlC,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAX,GAA+B,CAA3C;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,IAAIuM,cAAc,CAAlB;AACA,IAAIC,UAAU,CACV,2CADU,EAEV,2CAFU,EAGV,2CAHU,CAAd;;AAMe,MAAM5H,MAAN,CAAa;;AAExB1E,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;AACA,aAAKqF,cAAL;AACA,aAAK1E,OAAL;AACH;;AAGDA,cAAW;;AAEP,YAAIkC,YAAY,KAAhB;AACA,YAAIC,WAAJ;;AAEArH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvC;AACAF,wBAAY,IAAZ;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAqH,0BAAc,EAAC9B,QAAO,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAAR,EAAd;AACA,iBAAKxB,OAAL;AACA,iBAAKD,QAAL;AACH,SAPD;;AASA/D,eAAOmF,EAAP,CAAU,qBAAV,EAAkCmC,GAAD,IAAS;AACtC,gBAAI,CAACF,SAAL,EAAgB;;AAEhB,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA,iBAAKiI,SAAL,CAAe7C,IAAI/F,CAAnB,EAAsB+F,IAAII,CAA1B;AACAlB,uBAAW4D,SAAX;AAEH,SAPD;;AASAlI,eAAOmF,EAAP,CAAU,kCAAV,EAA+CmC,GAAD,IAAS;AACnD;AACAF,wBAAY,KAAZ;AACAhK,kFAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAA,yBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,mBAAOnC,GAAP,CAAWyG,UAAX;AACAxI,6EAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACH,SAPD;AAQH;;AAEDiD,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACA;AACA,YAAIlD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAGD6C,cAAU5I,CAAV,EAAamG,CAAb,EAAgB;;AAEZ,YAAIxJ,MAAMyN,SAASI,KAAT,CAAenM,KAAzB;AACAmJ,iBAAS4C,SAASf,KAAT,CAAe;AACpBrJ,eAAEA,IAAIrD,IAAIJ,KAAJ,GAAU,CADI;AAEpB4J,eAAEA,IAAIxJ,IAAIH,MAAJ,GAAW;AAFG,SAAf,CAAT;AAIAgL,eAAOmB,KAAP;AACA1D,mBAAWzG,GAAX,CAAegJ,MAAf;AACH;;AAED5C,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAGtE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAID;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAACzB,iBAASyB,KAAT;AAAgB;AACjCrC,eAAW;AACP,YAAIsF,IAAIpL,8DAAOA,CAACK,QAAR,CAAiBqG,MAAjB,CAAR;AACA8E,iBAASK,OAAT,CAAiB,CAACtM,MAAMuM,OAAN,CAAcC,IAAf,CAAjB;AACAP,iBAASQ,GAAT,CAAaZ,EAAExK,CAAf;AACA4K,iBAASS,KAAT,CAAeb,EAAEtK,CAAjB;AACA0K,iBAASU,IAAT,CAAcd,EAAErK,CAAhB;AACH;;AAED;;;;AAIAiE,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,OAAO,CAAf;AAAkB;AAClCrC,cAAU;AACN,YAAIhI,MAAMyN,SAASI,KAAT,CAAenM,KAAzB;AACA1B,YAAIJ,KAAJ,GAAYgJ,KAAZ;AACA5I,YAAIH,MAAJ,GAAa+I,KAAb;AACH;;AAED;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAEhC;;;;AAIAlB,gBAAYD,CAAZ,EAAe;AACX,YAAI6C,OAAO7C,EAAE8C,MAAF,CAASpG,EAAT,CAAYqG,MAAZ,CAAmB,CAAnB,EAAsB/C,EAAE8C,MAAF,CAASpD,IAAT,CAAcxE,MAAd,GAAuB,CAA7C,CAAX;AACA,gBAAQ2H,IAAR;AAEI,iBAAK,IAAL;AACImD,8BAAc,CAAd;AACA;AACJ,iBAAK,IAAL;AACIA,8BAAc,CAAd;AACA;AACJ,iBAAK,IAAL;AACIA,8BAAc,CAAd;AACA;AACJ;AACIA,8BAAc,CAAd;AACA;AAbR;AAeA,aAAKE,cAAL;AACH;;AAED7D,kBAAc;AAAC,eAAO2D,WAAP;AAAoB;;AAEnCE,qBAAiB;AACbH,mBAAW,IAAIhM,KAAJ,EAAX;AACAgM,iBAASW,MAAT,GAAiB,MAAK;AAClB,gBAAI7M,MAAM,IAAIC,MAAMC,KAAV,CAAgB;AACtBC,uBAAM+L;AADgB,aAAhB,CAAV;AAGAA,uBAAWlM,GAAX;AACAkM,qBAASzB,KAAT;AACH,SAND;AAOAyB,iBAASY,GAAT,GAAeV,QAAQ,KAAK5D,WAAL,EAAR,CAAf;AACH;;AA/IuB,C;;;;;;;;;ACf5B;AAAA;AAAA;AACA;;AAEA,IAAI/F,MAAJ,EAAYuE,KAAZ,EAAmB+F,KAAnB,EAA0BC,WAA1B,EAAuCjG,UAAvC,EAAmD8C,SAAnD,EAA8DD,QAA9D;AACA,IAAIqD,WAAW,EAAf;AACA,IAAI7F,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;;AAEe,MAAMiF,MAAN,CAAa;;AAGxB/E,SAAK2H,KAAL,EAAYyF,SAAZ,EAAuB;;AAEnB3O,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAamG,SAAb;AACAlG,gBAAQ,IAAR;;AAEA;AACAzI,yEAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC;AACA,aAAKkB,OAAL;AAEH;;AAEDA,cAAW;AACPkC,oBAAY,KAAZ;AACA,YAAIC,WAAJ;AACArH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvC;AACAF,wBAAY,IAAZ;AACA;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAqH,0BAAc,IAAI7J,MAAM8H,IAAV,CAAe;AACzBK,wBAAQpB,MAAMR,QAAN,EADiB;AAEzB6B,6BAAarB,MAAMP,OAAN,EAFY;AAGzBuB,wBAAQ,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAHiB;AAIzBC,yBAAQ,OAJiB;AAKzBiC,yBAAQ5L,iEAAUA,CAACQ,eALM;AAMzBoJ,yBAAQnB,MAAMpB,UAAN,KAAqB,GANJ;AAOzBqE,0CAAyB;AAPA,aAAf,CAAd;AASAlD,uBAAWzG,GAAX,CAAewJ,WAAf;AACH,SAfD;;AAiBArH,eAAOmF,EAAP,CAAU,qBAAV,EAAiC,MAAM;AACnC,gBAAIC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6J,KAAvB,CAA6Bb,IAAI/F,CAAjC,EAAoC+F,IAAII,CAAxC;AACA,gBAAI,CAAC4B,SAAL,EAAgB;AACZ;AACH;;AAED,gBAAIO,YAAYN,YAAY9B,MAAZ,GAAqBqC,MAArB,CAA4B,CAACxC,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAA5B,CAAhB;AACA6B,wBAAY9B,MAAZ,CAAmBoC,SAAnB;AACArD,uBAAW4D,SAAX;AACH,SAVD;;AAYAlI,eAAOmF,EAAP,CAAU,kCAAV,EAA+CmC,GAAD,IAAS;AACnDxL,6EAAUA,CAACM,WAAX,CAAuB4J,QAAvB;AACA,gBAAIZ,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC,EAAiDoB,IAAI/F,CAArD,EAAwD+F,IAAII,CAA5D;AACA4B,wBAAY,KAAZ;AACA;;;;AAIH,SATD;AAUH;;AAEDG,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACAF,kBAAUG,MAAV;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAEDnB,cAAU;AACN;AACA,YAAGjE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAED;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAEhC;;;;AAIA8D,eAAWhM,GAAX,EAAgB;AAAEwK,mBAAWxK,GAAX;AAAgB;AAClC8K,iBAAa;AAAE,eAAON,QAAP;AAAiB;;AAGhC;;;;AAIAxD,gBAAYhH,GAAZ,EAAiB,CAAE;AACnBoJ,gBAAYpJ,GAAZ,EAAiB,CAAE;;AA5GK,C;;;;;;;;;ACT5B;AAAA;;AAEA,MAAM+N,mBAAmB,CAAzB;AACA,MAAMC,mBAAmB,EAAzB;AACA,MAAMC,mBAAmB,GAAzB;AACA,IAAIC,mBAAmB,GAAvB;AACA,IAAI7K,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB;AACA,MAAMuG,aAAa,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,CAA1B,EAA6B,GAA7B,EAAkC,IAAlC,EAAwC,GAAxC,EAA6C,IAA7C,EAAmD,CAAnD,CAAnB;AACA,IAAIC,aAAa,CAAjB;;AAEe,MAAM1I,IAAN,CAAW;;AAEtBhF,SAAK2H,KAAL,EAAYyF,SAAZ,EAAuB;AACnB3O,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAamG,SAAb;AACAlG,gBAAQ,IAAR;AACA,aAAKyG,YAAL;AACH;;AAEDA,mBAAe;AACXhL,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvCA,gBAAIA,GAAJ,CAAQ2D,cAAR;AACA,gBAAIC,WAAWJ,WAAWK,OAAX,CAAmBnL,OAAOoL,MAAP,EAAnB,CAAf;AACA,gBAAGF,aAAaJ,WAAWlM,MAAX,GAAoB,CAAjC,IAAsCsM,aAAa,CAAtD,EAAyDH,aAAa,CAACA,UAAd;AACzD,gBAAIM,WAAWP,WAAWI,WAAWH,UAAtB,CAAf;AACA,iBAAKO,WAAL,CAAiBD,QAAjB;AACA;;;;;;;;;;;AAWH,SAjBD;AAkBH;;AAEDC,gBAAYC,KAAZ,EAAmB;AACfvL,eAAOuL,KAAP,CAAa,EAAClM,GAAGkM,KAAJ,EAAW/F,GAAE+F,KAAb,EAAb;AACAvL,eAAOlC,IAAP;AAEH;;AAEDmG,cAAU;AACN,YAAGjE,MAAH,EAAWA,OAAOmG,GAAP,CAAW,sBAAX;AAEd;;AAED;;;;AAIAlD,YAAQwF,KAAR,EAAe;AACb;;;AAGEoC,2BAAmBpC,QAAM,GAAzB;AACA,aAAK6C,WAAL,CAAiB,KAAKtH,OAAL,EAAjB;AACH;AACDA,cAAU;AAAE,eAAO6G,gBAAP;AAAyB;;AArDf,C;;;;;;;;;ACV1B;AAAA;;AAEA,IAAI7K,MAAJ;AACe,MAAMsC,IAAN,CAAW;;AAEtBjF,SAAM2H,KAAN,EAAa;AACTlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACAP,yEAAUA,CAACS,eAAX,GAA6B,KAA7B;AACAyD,iBAASgF,KAAT;AACAhF,eAAOwL,SAAP,CAAiB,IAAjB;AACH;;AAEDvH,cAAW;AACP,YAAGjE,MAAH,EAAUA,OAAOwL,SAAP,CAAiB,KAAjB;AAEb;;AAZqB,C;;;;;;;;;ACHX,MAAMjJ,WAAN,CAAkB;AAC7BkJ,gBAAY9N,MAAZ,EAAoB;AAChB;AACAA,eAAOuG,KAAP;AACH;;AAJ4B,C;;;;;;;;;ACAjC;AAAA;AAAA;AACA;;AAEA,IAAIlE,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB,EAA+BmH,aAA/B,EAA8CC,aAA9C,EAA6DC,SAA7D;AACA,IAAIjH,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,IAAIgK,WAAW,OAAf;AACA,IAAI0E,eAAe,GAAnB;AACA,MAAMC,aAAa,uCAAnB;;AAIe,MAAMjK,KAAN,CAAY;;AAEvBxE,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC;AACAlI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;AACA,aAAKW,OAAL;AAEH;;AAEDA,cAAW;;AAEP,YAAIkC,YAAY,KAAhB;AACA,YAAIC,WAAJ;AACArH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;;AAEvC,gBAAIlC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA0L,4BAAgB,IAAIjO,KAAJ,EAAhB;AACA;AACAiO,0BAAcrB,GAAd,GAAoB,KAAKtE,WAAL,EAApB;AACA2F,0BAActB,MAAd,GAAuB,MAAM;AACzBuB,gCAAgB,IAAInO,MAAMuO,KAAV,EAAhB;AACAzH,2BAAWzG,GAAX,CAAe8N,aAAf;;AAEAtE,8BAAc,IAAI7J,MAAM8H,IAAV,CAAe;AACzBK,4BAAQpB,MAAMR,QAAN,EADiB;AAEzB6B,iCAAarB,MAAMP,OAAN,EAFY;AAGzBuB,4BAAQ,CAACH,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAHiB;AAIzBC,6BAAQlB,MAAMkD,UAAN,EAJiB;AAKzBC,6BAAQ5L,iEAAUA,CAACQ,eALM;AAMzByL,0BAAK,SANoB;AAOzBrC,6BAAQnB,MAAMpB,UAAN,KAAqB;AAPJ,iBAAf,CAAd;;AAUAyI,4BAAY,IAAIpO,MAAMqK,IAAV,CAAe;AACvBxI,uBAAE,CADqB;AAEvBmG,uBAAE,CAFqB;AAGvB5J,2BAAM,GAHiB;AAIvBC,4BAAO,GAJgB;AAKvBmQ,sCAAkBN,aALK;AAMvBlE,8CAA0B;AANH,iBAAf,CAAZ;;AASAJ,4BAAY,IAAZ;AACH,aAxBD;AA0BH,SAhCD;;AAkCApH,eAAOmF,EAAP,CAAU,qBAAV,EAAkCmC,GAAD,IAAS;AACtC,gBAAIlC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6J,KAAvB,CAA6Bb,IAAI/F,CAAjC,EAAoC+F,IAAII,CAAxC;AACA,gBAAI,CAAC4B,SAAL,EAAgB;AAChB,gBAAIO,YAAYN,YAAY9B,MAAZ,GAAqBqC,MAArB,CAA4B,CAACxC,IAAI/F,CAAL,EAAQ+F,IAAII,CAAZ,CAA5B,CAAhB;AACA6B,wBAAY9B,MAAZ,CAAmBoC,SAAnB;;AAEAgE,0BAAc9N,GAAd,CAAkBwJ,WAAlB;AACA/C,uBAAWzG,GAAX,CAAe+N,SAAf;AACAtH,uBAAW4D,SAAX;AACH,SAVD;;AAYAlI,eAAOmF,EAAP,CAAU,kCAAV,EAA+CmC,GAAD,IAAS;AACnDxL,6EAAUA,CAACM,WAAX,CAAuB4J,QAAvB;AACA,gBAAIZ,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACAlE,6EAAUA,CAACM,WAAX,CAAuB6I,SAAvB,CAAiC,KAAKjB,OAAL,EAAjC,EAAiDoB,IAAI/F,CAArD,EAAwD+F,IAAII,CAA5D;AACA4B,wBAAY,KAAZ;AACAhK,kFAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACAA,yBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,mBAAOnC,GAAP,CAAWyG,UAAX;AACAxI,6EAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACH,SATD;AAUH;;AAEDiD,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACAF,kBAAUG,MAAV;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAGDnB,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAGtE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAGD;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;;AAEhC;;;;AAIA8D,eAAWhM,GAAX,EAAgB;AAAEwK,mBAAWxK,GAAX;AAAgB;AAClC8K,iBAAa;AAAE,eAAON,QAAP;AAAiB;;AAEhC;;;;AAIAxD,gBAAYD,CAAZ,EAAe;AACX,YAAI6C,OAAO7C,EAAE8C,MAAF,CAASpG,EAAT,CAAYqG,MAAZ,CAAmB,CAAnB,EAAsB/C,EAAE8C,MAAF,CAASpD,IAAT,CAAcxE,MAAd,GAAuB,CAA7C,CAAX;AACAiN,uBAAetF,IAAf;AACH;AACDR,kBAAc;AACV,YAAIkG,MAAMH,aAAaD,YAAb,GAA4B,MAAtC;AACA,eAAOI,GAAP;AACH;;AApIsB,C;;;;;;;;;ACb3B;AAAA;AAAA;AACA;;AAEA,IAAIjM,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB,EAA+B2H,SAA/B,EAA0CC,SAA1C;AACA,IAAIxH,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,MAAMiP,eAAe,UAArB;AACA;AACA,MAAMC,cAAc,CAChB,oBADgB,EAEhB,kBAFgB,EAGhB,kBAHgB,EAIhB,4BAJgB,EAKhB,eALgB,EAMhB,aANgB,EAOhB,iBAPgB,EAQhB,mBARgB,EAShB,eATgB,EAUhB,mBAVgB,EAWhB,yBAXgB,EAYhB,aAZgB,EAahB,gBAbgB,EAchB,kBAdgB,CAApB;;AAiBe,MAAMlK,SAAN,CAAgB;AAC3B9E,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAa,IAAI9G,MAAMqF,KAAV,EAAb;AACA7C,eAAOnC,GAAP,CAAWyG,UAAX;AACAxI,yEAAUA,CAACK,aAAX,GAA2BmI,UAA3B;AACAC,gBAAQ,IAAR;;AAEA,aAAKW,OAAL;AACH;;AAGDA,cAAW;;AAEP,YAAIkC,YAAY,KAAhB;;AAEApH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvCF,wBAAY,CAACA,SAAb;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA,gBAAIsM,KAAKD,YAAY,CAAZ,CAAT;AACA,gBAAGjF,SAAH,EACA;AACI+E,4BAAY,IAAI3O,MAAM+O,IAAV,CAAe;AACvB;AACAlN,uBAAG+F,IAAI/F,CAFgB;AAGvBmG,uBAAGJ,IAAII,CAHgB;AAIvBgH,8BAAU,KAAKxI,OAAL,EAJa;AAKvByI,gCAAYH,EALW;AAMvBvE,0BAAM,KAAKhE,QAAL;AANiB,iBAAf,CAAZ;;AASAO,2BAAWzG,GAAX,CAAesO,SAAf;;AAEA,oBAAIO,WAAW1M,OAAO2M,YAAP,GAAsBC,qBAAtB,EAAf;AACA,oBAAIC,eAAe;AACfxN,uBAAG+F,IAAI/F,CAAJ,GAAQqN,SAASI,IADL;AAEftH,uBAAGJ,IAAII,CAAJ,GAAQkH,SAASK;AAFL,iBAAnB;;AAKAb,4BAAY/N,SAASC,aAAT,CAAuB,UAAvB,CAAZ;AACAD,yBAAS6O,IAAT,CAAcC,WAAd,CAA0Bf,SAA1B;;AAEAA,0BAAUxN,KAAV,GAAkByN,UAAUe,IAAV,EAAlB;AACAhB,0BAAUiB,KAAV,CAAgBC,QAAhB,GAA2B,UAA3B;AACAlB,0BAAUiB,KAAV,CAAgBJ,GAAhB,GAAsBF,aAAarH,CAAb,GAAiB,IAAvC;AACA0G,0BAAUiB,KAAV,CAAgBL,IAAhB,GAAuBD,aAAaxN,CAAb,GAAiB,IAAxC;AACA;AACA6M,0BAAUiB,KAAV,CAAgBvR,KAAhB,GAAwB,MAAxB;AACAsQ,0BAAUiB,KAAV,CAAgBtR,MAAhB,GAAyBsQ,UAAUtQ,MAAV,KAAqB,IAA9C;AACAqQ,0BAAUmB,KAAV;AACAnB,0BAAUoB,gBAAV,CAA2B,OAA3B,EAAoC,KAAKC,WAAzC;AAEH,aAhCD,MAkCA;AACI;AACApP,yBAAS6O,IAAT,CAAcQ,WAAd,CAA0BtB,SAA1B;AACA;AACA;AACH;AAGJ,SA9CD;AAgDH;;AAEDqB,kBAAc;;AAEV;AACA;AACA;AACA;AACArB,kBAAUiB,KAAV,CAAgBvR,KAAhB,GAAwBuQ,UAAUvQ,KAAV,KAAoB,IAA5C;AACAsQ,kBAAUiB,KAAV,CAAgBtR,MAAhB,GAAyBsQ,UAAUtQ,MAAV,KAAqB,IAA9C;;AAEA;;AAEA,YAAGqQ,UAAUxN,KAAb,EACA;AACIyN,sBAAUe,IAAV,CAAehB,UAAUxN,KAAzB;AACA4F,uBAAWxG,IAAX;AACH;AACJ;;AAEDyJ,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACAF,kBAAUG,MAAV;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAEDqI,cAAUpO,CAAV,EAAamG,CAAb,EAAgB;AACZ,YAAI0H,OAAO,IAAI1P,MAAM+O,IAAV,CAAe;AACtBlN,eAAGA,CADmB;AAEtBmG,eAAGA,CAFmB;AAGtB0H,kBAAM,OAHgB;AAItBV,sBAAU,EAJY;AAKtBC,wBAAY,MALU;AAMtB;AACA1E,kBAAM,KAAKhE,QAAL;AAPgB,SAAf,CAAX;AASAO,mBAAWzG,GAAX,CAAeqP,IAAf;AACA5I,mBAAW4D,SAAX;AAEH;;AAEDjE,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAG4H,SAAH,EAAc/N,SAAS6O,IAAT,CAAcQ,WAAd,CAA0BtB,SAA1B;AACd,YAAGlM,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,qBAAX;AACV,YAAGnG,MAAH,EAAUA,OAAOmG,GAAP,CAAW,kCAAX;AACb;;AAID;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;AAzIL,C;;;;;;;;;AC1B/B;AAAA;AAAA;AAAA;AACA;AACA;;AAEA,IAAI7E,MAAJ,EAAYsE,UAAZ,EAAwBC,KAAxB;AACA,IAAII,SAAS7I,iEAAUA,CAACoB,aAAxB;AACA,IAAI0H,QAAQ9I,iEAAUA,CAACkB,iBAAvB;AACA,IAAI6H,WAAW/I,iEAAUA,CAACqB,eAA1B;AACA,IAAIuQ,SAAJ,EAAeC,aAAf,EAA8BC,aAA9B;;AAEe,MAAMC,aAAN,CAAoB;AAC/BxQ,SAAK2H,KAAL,EAAY;;AAERlJ,yEAAUA,CAACO,YAAX,GAA0B,IAA1B;AACA2D,iBAASgF,KAAT;AACAV,qBAAaxI,iEAAUA,CAACI,UAAxB;AACAqI,gBAAQ,IAAR;AACA,aAAKW,OAAL;AAEH;;AAEDA,cAAW;AACP,YAAIkC,YAAY,KAAhB;AACApH,eAAOmF,EAAP,CAAU,sBAAV,EAAmCmC,GAAD,IAAS;AACvCF,wBAAY,IAAZ;AACA,gBAAIhC,MAAM,KAAKmC,0BAAL,CAAgCvH,MAAhC,CAAV;AACA,gBAAIoG,QAAQnI,8DAAOA,CAACK,QAAR,CAAiB,KAAKyF,QAAL,EAAjB,CAAZ;AACA,iBAAK+J,OAAL,CAAaxJ,UAAb,EAAyB8B,KAAzB,EAAgChB,IAAI/F,CAApC,EAAuC+F,IAAII,CAA3C;AAEH,SAND;AAOH;;AAEDsI,YAAQC,GAAR,EAAaC,WAAb,EAA0BC,MAA1B,EAAkCC,MAAlC,EAA0C;;AAEtCN,wBAAgBI,WAAhB;AACAL,wBAAgBI,IAAIpQ,MAAJ,CAAW/B,KAA3B;AACA8R,oBAAYK,IAAIpQ,MAAJ,CAAWwQ,OAAX,CAAmBC,QAAnB,CAA4BC,YAA5B,CAAyC,CAAzC,EAA4C,CAA5C,EAA+CN,IAAIpQ,MAAJ,CAAW/B,KAA1D,EAAiEmS,IAAIpQ,MAAJ,CAAW9B,MAA5E,CAAZ;;AAEA,YAAIyS,WAAW,CAACJ,SAASP,aAAT,GAAyBM,MAA1B,IAAoC,CAAnD;AAAA,YACIpP,IAAI6O,UAAUa,IAAV,CAAeD,QAAf,CADR;AAAA,YAEIvP,IAAI2O,UAAUa,IAAV,CAAeD,WAAW,CAA1B,CAFR;AAAA,YAGItP,IAAI0O,UAAUa,IAAV,CAAeD,WAAW,CAA1B,CAHR;AAAA,YAIIrP,IAAIyO,UAAUa,IAAV,CAAeD,WAAW,CAA1B,CAJR;;AAMA,YAAIzP,MAAM+O,cAAc/O,CAApB,IAAyBE,MAAM6O,cAAc7O,CAA7C,IAAkDC,MAAM4O,cAAc5O,CAAtE,IAA2EC,MAAM2O,cAAc3O,CAAnG,EAAsG;AAClG;AACA,mBAAO,IAAP;AACH;;AAED,aAAKuP,SAAL,CAAeT,GAAf,EAAoBE,MAApB,EAA4BC,MAA5B,EAAoCrP,CAApC,EAAuCE,CAAvC,EAA0CC,CAA1C,EAA6CC,CAA7C;;AAEA;AACAqF,mBAAW3G,MAAX,CAAkBwQ,OAAlB,CAA0BM,YAA1B,CAAuCf,SAAvC,EAAiD,CAAjD,EAAmD,CAAnD;AACAA,oBAAY,IAAZ;AACH;;AAEDc,cAAUT,GAAV,EAAeE,MAAf,EAAuBC,MAAvB,EAA+BQ,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDC,MAAvD,EAA+D;AAC3D,YAAIC,cAAcnB,aAAlB;AAAA,YACIoB,MADJ;AAAA,YAEI1P,CAFJ;AAAA,YAGImG,CAHJ;AAAA,YAII8I,QAJJ;AAAA,YAKIU,SALJ;AAAA,YAMIC,UANJ;AAAA,YAOIC,mBAAmB,CAPvB;AAAA,YAQIC,kBAAkB,CARtB;AAAA,YASIC,oBAAoBrB,IAAIpQ,MAAJ,CAAW/B,KATnC;AAAA,YAUIyT,qBAAqBtB,IAAIpQ,MAAJ,CAAW9B,MAVpC;AAAA,YAWIyT,aAAa,CAAC,CAACrB,MAAD,EAASC,MAAT,CAAD,CAXjB;;AAaA,eAAOoB,WAAW1Q,MAAlB,EAA0B;;AAEtBmQ,qBAASO,WAAWhJ,GAAX,EAAT;AACAjH,gBAAI0P,OAAO,CAAP,CAAJ;AACAvJ,gBAAIuJ,OAAO,CAAP,CAAJ;;AAEA;AACAT,uBAAW,CAAC9I,IAAIsJ,WAAJ,GAAkBzP,CAAnB,IAAwB,CAAnC;;AAEA;AACA,mBAAOmG,IAAI2J,eAAJ,IAAuB,KAAKI,eAAL,CAAqBjB,QAArB,EAA+BI,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDC,MAAvD,CAA9B,EAA8F;AAC1FrJ,qBAAK,CAAL;AACA8I,4BAAYQ,cAAc,CAA1B;AACH;;AAEDR,wBAAYQ,cAAc,CAA1B;AACAtJ,iBAAK,CAAL;AACAwJ,wBAAY,KAAZ;AACAC,yBAAa,KAAb;;AAEA;AACA,mBAAOzJ,IAAI6J,kBAAJ,IAA0B,KAAKE,eAAL,CAAqBjB,QAArB,EAA+BI,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDC,MAAvD,CAAjC,EAAiG;AAC7FrJ,qBAAK,CAAL;;AAEA,qBAAKgK,UAAL,CAAgBlB,QAAhB;;AAEA,oBAAIjP,IAAI6P,gBAAR,EAA0B;AACtB,wBAAI,KAAKK,eAAL,CAAqBjB,WAAW,CAAhC,EAAmCI,MAAnC,EAA2CC,MAA3C,EAAmDC,MAAnD,EAA2DC,MAA3D,CAAJ,EAAwE;AACpE,4BAAI,CAACG,SAAL,EAAgB;AACZ;AACAM,uCAAWxS,IAAX,CAAgB,CAACuC,IAAI,CAAL,EAAQmG,CAAR,CAAhB;AACAwJ,wCAAY,IAAZ;AACH;AACJ,qBAND,MAMO,IAAIA,SAAJ,EAAe;AAClBA,oCAAY,KAAZ;AACH;AACJ;;AAED,oBAAI3P,IAAI+P,iBAAR,EAA2B;AACvB,wBAAI,KAAKG,eAAL,CAAqBjB,WAAW,CAAhC,EAAmCI,MAAnC,EAA2CC,MAA3C,EAAmDC,MAAnD,EAA2DC,MAA3D,CAAJ,EAAwE;AACpE,4BAAI,CAACI,UAAL,EAAiB;AACb;AACAK,uCAAWxS,IAAX,CAAgB,CAACuC,IAAI,CAAL,EAAQmG,CAAR,CAAhB;AACAyJ,yCAAa,IAAb;AACH;AACJ,qBAND,MAMO,IAAIA,UAAJ,EAAgB;AACnBA,qCAAa,KAAb;AACH;AACJ;;AAEDX,4BAAYQ,cAAc,CAA1B;AACH;AACJ;AAGJ;;AAEDS,oBAAgBjB,QAAhB,EAA0BI,MAA1B,EAAkCC,MAAlC,EAA0CC,MAA1C,EAAkDC,MAAlD,EAA0D;AACtD,cAAMY,MAAM/B,UAAUa,IAAtB;AACA,eACIG,WAAWe,IAAInB,QAAJ,CAAX,IACAK,WAAWc,IAAInB,WAAW,CAAf,CADX,IAEAM,WAAWa,IAAInB,WAAW,CAAf,CAFX,IAGAO,WAAWY,IAAInB,WAAW,CAAf,CAJf;AAMH;;AAEDkB,eAAWlB,QAAX,EAAqB;AACjB,cAAMmB,MAAM/B,UAAUa,IAAtB;AACAkB,YAAInB,QAAJ,IAAgBV,cAAc/O,CAA9B;AACA4Q,YAAInB,WAAW,CAAf,IAAoBV,cAAc7O,CAAlC;AACA0Q,YAAInB,WAAW,CAAf,IAAoBV,cAAc5O,CAAlC;AACAyQ,YAAInB,WAAW,CAAf,IAAoB,GAApB;AACH;;AAGD/G,+BAA2BY,IAA3B,EAAiC;AAC7B,YAAIC,YAAYD,KAAKE,oBAAL,GAA4BC,IAA5B,EAAhB;AACAF,kBAAUG,MAAV;AACA,YAAInD,MAAM+C,KAAKK,QAAL,GAAgBnD,kBAAhB,EAAV;AACA,eAAO+C,UAAUK,KAAV,CAAgBrD,GAAhB,CAAP;AACH;;AAEDnB,cAAW;AACP7G,8EAAYA,CAAC0G,SAAb,CAAuBzG,IAAvB,CAA4BiH,UAA5B;AACA,YAAGtE,MAAH,EAAUA,OAAOmG,GAAP,CAAW,sBAAX;AACb;;AAED;;;;AAIAnD,aAASoD,KAAT,EAAgB;AAAEzB,iBAASyB,KAAT;AAAgB;AAClCrC,eAAW;AAAE,eAAOY,MAAP;AAAe;;AAE5B;;;;AAIA1B,YAAQoD,IAAR,EAAc;AAAEzB,gBAAQyB,IAAR;AAAc;AAC9BrC,cAAU;AAAE,eAAOY,KAAP;AAAc;;AAE1B;;;;AAIA1B,eAAWwC,OAAX,EAAoB;AAAEb,mBAAWa,OAAX;AAAoB;AAC1CvC,iBAAa;AAAE,eAAO0B,QAAP;AAAiB;AAvKD,C;;;;;;;;;ACVnC;AAAA;;AAEA,IAAI6K,cAAJ,EAAoB1P,MAApB,EAA4B2P,MAA5B,EAAoC/K,KAApC;AACA,MAAMgL,eAAe,CAArB;AACe,MAAM9M,MAAN,CAAa;AACxBN,gBAAYwC,KAAZ,EAAmBvC,KAAnB,EAA0BoN,OAAO,OAAjC,EAA0CxJ,OAAO,IAAjD,EAAuD;AACnDrG,iBAASgF,KAAT;AACA2K,iBAASlN,KAAT;AACAmC,gBAAQyB,IAAR;AACArG,eAAO4C,SAAP,GAAmBuK,KAAnB,CAAyB2C,MAAzB,GAAmC,WAAnC;AACA;AAEH;;AAED7K,cAAU+D,MAAV,EAAiB3J,IAAG,CAApB,EAAuBmG,IAAG,CAA1B,EAA6B;AACzBkK,yBAAiB,IAAIlS,MAAMuS,MAAV,CAAiB;AAC9B1Q,eAAGA,CAD2B;AAE9BmG,eAAGA,CAF2B;AAG9BwD,oBAAQlK,SAASkK,SAAS,GAAlB,CAHsB;AAI9BrD,oBAAQ,OAJsB;AAK9BC,yBAAagK;AALiB,SAAjB,CAAjB;AAOAD,eAAO9R,GAAP,CAAW6R,cAAX;AACH;;AAEDzJ,UAAM5G,CAAN,EAASmG,CAAT,EAAY;AACR,YAAGkK,cAAH,EACA;AACI,gBAAGrQ,KAAK,CAAL,IAAUA,KAAKvD,iEAAUA,CAACG,UAAX,CAAsBL,KAArC,IAA8C4J,KAAK,CAAnD,IAAwDA,KAAK1J,iEAAUA,CAACG,UAAX,CAAsBJ,MAAtF,EACA;AACI8D,wBAAQC,GAAR,CAAYP,CAAZ,EAAemG,CAAf;AACAkK,+BAAeM,OAAf,CAAuB,KAAvB;AACH,aAJD,MAMA;AACIhQ,uBAAO4C,SAAP,GAAmBuK,KAAnB,CAAyB2C,MAAzB,GAAmC,WAAnC;AACAJ,+BAAerQ,CAAf,CAAiBA,CAAjB;AACAqQ,+BAAelK,CAAf,CAAiBA,CAAjB;AACAkK,+BAAeM,OAAf,CAAuB,IAAvB;AACAL,uBAAO7R,IAAP;AACH;AAEJ;AAEJ;;AAEDkI,eAAW;AACP,YAAG0J,cAAH,EAAmB;AACfA,2BAAezL,OAAf;AACA0L,mBAAO7R,IAAP;AACH;AACJ;;AA/CuB,C","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8e1392fe2feabd9a0af9","let _tool = null;\r\nlet _isDrawingMode = false;\r\nlet _isLineDrawing = false;\r\nlet _selectedColor = '';\r\nlet _selectedSize = 0;\r\nlet _drawingHistory = [];\r\nconst _historyLimit = 30;\r\n\r\nconst _defaultTension = 0.3;\r\nconst _defaultBrushSize = 10;\r\nconst _defaultLineSize = 15;\r\nconst _defaultEraserSize = 15;\r\nconst _defaultColor = '#000000';\r\nconst _defaultOpacity = 100;\r\n\r\nlet _mainStage = null;\r\nlet _mainDrawLayer = null;\r\nlet _currentLayer = null;\r\nlet _drawCursor = null;\r\nlet _stageSize = {width:810, height:700}\r\n\r\nexport default class GameConfig {\r\n\r\n    static get MAIN_STAGE() { return _mainStage};\r\n    static set MAIN_STAGE(obj) { _mainStage = obj};\r\n\r\n    static get STAGE_SIZE() { return _stageSize};\r\n    static set STAGE_SIZE(obj) { _stageSize = obj};\r\n\r\n    static get MAIN_LAYER() { return _mainDrawLayer};\r\n    static set MAIN_LAYER(obj) { _mainDrawLayer = obj};\r\n\r\n    static get CURRENT_LAYER() { return _currentLayer};\r\n    static set CURRENT_LAYER(obj) { _currentLayer = obj};\r\n\r\n    static get DRAW_CURSOR() { return _drawCursor};\r\n    static set DRAW_CURSOR(obj) { _drawCursor = obj};\r\n\r\n    static get CURRENT_TOOL() { return _tool};\r\n    static set CURRENT_TOOL(obj) { _tool = obj};\r\n\r\n    static get DEFAULT_TENSION() { return _defaultTension};\r\n\r\n    static get IS_DRAWING_MODE() { return _isDrawingMode};\r\n    static set IS_DRAWING_MODE(bool) { _isDrawingMode = bool};\r\n\r\n    static get IS_LINE_DRAWING() { return _isLineDrawing};\r\n    static set IS_LINE_DRAWING(bool) { _isLineDrawing = bool};\r\n\r\n    static get SELECTED_COLOR() { return _selectedColor};\r\n    static set SELECTED_COLOR(str) { _selectedColor = str};\r\n\r\n    static get SELECTED_SIZE() { return _selectedSize};\r\n    static set SELECTED_SIZE(num) { _selectedSize = num}\r\n\r\n    static get SELECTED_SIZE() { return _drawingHistory};\r\n    static set SELECTED_SIZE(obj) { _drawingHistory.push(obj)};\r\n\r\n    static get DEFAULT_BRUSH_SIZE() { return _defaultBrushSize};\r\n    static get DEFAULT_LINE_SIZE() { return _defaultLineSize};\r\n    static get DEFAULT_ERASER_SIZE() { return _defaultEraserSize};\r\n    static get DEFAULT_COLOR() { return _defaultColor};\r\n    static get DEFAULT_OPACITY() { return _defaultOpacity};\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/GameConfig.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nexport default class LayerManager {\r\n        init(currentLayer) {\r\n        if(currentLayer === GameConfig.MAIN_LAYER)\r\n        return;\r\n        let _currentLayer = currentLayer;\r\n        let img = new Konva.Image({\r\n                image:_currentLayer.canvas._canvas,\r\n                width:GameConfig.STAGE_SIZE.width,\r\n                height:GameConfig.STAGE_SIZE.height\r\n        });\r\n        GameConfig.MAIN_LAYER.add(img);\r\n        GameConfig.MAIN_LAYER.draw();\r\n        // _currentLayer.destroy();\r\n        GameConfig.MAIN_STAGE.remove(_currentLayer);\r\n        // _currentLayer.clear();\r\n        _currentLayer.remove();\r\n        _currentLayer = null;\r\n        // console.log(\"GameConfig.MAIN_LAYER\", GameConfig.MAIN_LAYER);\r\n    }\r\n\r\n    stageUpdate() {\r\n        /* const scale = 1 / 4;\r\n         const url = _stage.toDataURL({ pixelRatio: scale });\r\n         document.getElementById('preview').src = url;*/\r\n\r\n        // let dataUrl = _drawLayer.toDataURL();\r\n        // this.downloadURI(dataUrl, 'stage.png');\r\n        // let json = _stage.toJSON();\r\n        // console.log(json);\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/manager/LayerManager.js","export default class Utility {\r\n\r\n    static newCtx(width, height) {\r\n        let canvas = document.createElement(\"canvas\");\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        return canvas.getContext(\"2d\");\r\n    }\r\n\r\n    static hexToRgb(hexType) {\r\n        let hex = hexType.replace( \"#\", \"\" );\r\n        let value = hex.match( /[a-f\\d]/gi );\r\n\r\n        // 헥사값이 세자리일 경우, 여섯자리로.\r\n        if ( value.length == 3 ) hex = value[0] + value[0] + value[1] + value[1] + value[2] + value[2];\r\n\r\n        value = hex.match( /[a-f\\d]{2}/gi );\r\n        let r = parseInt( value[0], 16 );\r\n        let g = parseInt( value[1], 16 );\r\n        let b = parseInt( value[2], 16 );\r\n\r\n        return {\r\n            r, g, b, a: 255\r\n        };\r\n    }\r\n\r\n    _rgbToHex(r,g,b) {\r\n\r\n        let rgbToHex = (r, g, b) => '#' + [r, g, b].map(x => {\r\n            const hex = x.toString(16)\r\n            return hex.length === 1 ? '0' + hex : hex\r\n        }).join('');\r\n\r\n        // console.log(rgbToHex)\r\n    }\r\n\r\n    _hexToRgb(hex) {\r\n        hex.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\r\n            ,(m, r, g, b) => '#' + r + r + g + g + b + b)\r\n            .substring(1).match(/.{2}/g)\r\n            .map(x => parseInt(x, 16))\r\n\r\n        console.log(hex);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/utility.js","import SketchBookKonva from \"./sketchBook/SketchBookKonva\";\r\nlet s = new SketchBookKonva('container');\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import LineDraw from \"../module/LineDraw\";\r\nimport Brush from \"../module/Brush\";\r\nimport GameConfig from \"../data/GameConfig\";\r\nimport Airbrush from \"../module/Airbrush\";\r\nimport Crayon from \"../module/Crayon\";\r\nimport Eraser from \"../module/Eraser\";\r\nimport Zoom from \"../module/Zoom\";\r\nimport Move from \"../module/Move\";\r\nimport ClearCanvas from \"../module/ClearCanvas\";\r\nimport ScreenTone from \"../module/ScreenTone\";\r\nimport TextInput from \"../module/TextInput\";\r\nimport FloodFill from \"../module/FloodFill\";\r\nimport Cursor from \"../ui/Cursor\";\r\n\r\nlet _id, _stage, _mainLayer, _cursorLayer;\r\n\r\nlet $ = function(id){return document.getElementById(id)};\r\nlet toolsOption = $('toolsOption'),\r\n    brushEl = $('brush'),\r\n    airBrushEl = $('airBrush'),\r\n    crayonEl = $('crayon'),\r\n    fillEl = $('fill'),\r\n    lineEl = $('line'),\r\n    screenToneEl = $('screenTone'),\r\n    eraserEl = $('eraser'),\r\n    textEl = $('text'),\r\n    zoomEl= $('zoom'),\r\n    // moveEl = $('move'),\r\n    clearEl = $('clear'),\r\n    moveEl = $('move'),\r\n\r\n    //tools Property\r\n    colorEl = $('_color'),\r\n    sizeEl = $('_size'),\r\n    opacityEl = $('_opacity'),\r\n    zoomSlider = $('_zoom'),\r\n\r\n\r\n    /**\r\n     * TOOLS TYPE\r\n     * @type {HTMLElement | jQuery | HTMLElement}\r\n     */\r\n        //BRUSH TYPE\r\n    brushTypeEl = $('brushType'),\r\n\r\n    //ERASER TYPE\r\n    eraserTypeEl = $('EraserType'),\r\n\r\n    //LINE TYPE\r\n    lineTypeEl = $('lineType'),\r\n\r\n    //CRAYON TYPE\r\n    crayonTypeEl = $('crayonType'),\r\n\r\n    //SCREEN_TONE TYPE\r\n    screenToneTypeEl = $('screenToneType')\r\n\r\nlet _elementArr = [\r\n    {el:brushEl, obj:Brush},\r\n    {el:airBrushEl, obj:Airbrush},\r\n    {el:crayonEl, obj:Crayon},\r\n    {el:fillEl, obj:FloodFill},\r\n    {el:lineEl, obj:LineDraw},\r\n    {el:screenToneEl, obj:ScreenTone},\r\n    {el:textEl, obj:TextInput},\r\n    {el:eraserEl, obj:Eraser},\r\n    {el:zoomEl, obj:Zoom},\r\n    {el:moveEl, obj:Move},\r\n    {el:clearEl, obj:ClearCanvas},\r\n]\r\n\r\nexport default class SketchBookKonva {\r\n    constructor(id, width, height, layer = 1) {\r\n        _id = id;\r\n        this._init();\r\n    }\r\n\r\n    _init() {\r\n\r\n        _stage = new Konva.Stage({\r\n            container: 'container',\r\n            width:GameConfig.STAGE_SIZE.width,\r\n            height:GameConfig.STAGE_SIZE.height\r\n        });\r\n\r\n        GameConfig.MAIN_STAGE = _stage;\r\n\r\n        // this._createImg();\r\n\r\n        _mainLayer = new Konva.Layer();\r\n        GameConfig.MAIN_LAYER = _mainLayer;\r\n        _stage.add(_mainLayer);\r\n\r\n        _cursorLayer = new Konva.Layer();\r\n        _stage.add(_cursorLayer);\r\n\r\n        GameConfig.DRAW_CURSOR = new Cursor(_stage,_cursorLayer);\r\n\r\n\r\n\r\n        colorEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setColor(this.value);\r\n        }\r\n\r\n        sizeEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setSize(this.value);\r\n        }\r\n\r\n        opacityEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL)\r\n            {\r\n                GameConfig.CURRENT_TOOL.setOpacity(this.value);\r\n                GameConfig.CURRENT_TOOL.getOpacity();\r\n            }\r\n        }\r\n\r\n        zoomSlider.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL.constructor.name === 'Zoom')\r\n                GameConfig.CURRENT_TOOL.setSize(this.value);\r\n        }\r\n\r\n\r\n        /**TOOLS SELECT\r\n         *\r\n         */\r\n        for(let i in _elementArr)\r\n        {\r\n            let eL = _elementArr[i].el;\r\n            let o =  _elementArr[i].obj;\r\n            eL.onclick =()=> this._toolSelect(eL.id, o);\r\n        }\r\n\r\n        /**\r\n         * BRUSH STYLE\r\n         */\r\n        brushTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * LINE STYLE\r\n         */\r\n        lineTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * CRAYON STYLE\r\n         */\r\n        crayonTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * CRAYON STYLE\r\n         */\r\n        screenToneTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        this._toolSelect();\r\n\r\n    }\r\n\r\n\r\n    _toolSelect(id = '', obj =  Brush) {\r\n        // toolsOption.style.display = 'none';\r\n        // brushTypeEl.style.display = '';\r\n\r\n        if(id === 'clear')\r\n        {\r\n            this._layerClear();\r\n            return;\r\n        }\r\n        this._toolsDestroy();\r\n\r\n        if(id === 'zoom' || id === 'move')\r\n        {\r\n            GameConfig.IS_DRAWING_MODE = false;\r\n            obj.prototype.init(_stage);\r\n            return;\r\n        }\r\n\r\n\r\n        GameConfig.IS_DRAWING_MODE = true;\r\n        // this._toolsDestroy();\r\n\r\n        if(id === 'eraser') {\r\n            GameConfig.IS_DRAWING_MODE = false;\r\n            obj.prototype.init(_stage, _mainLayer);\r\n            return;\r\n        }\r\n        else obj.prototype.init(_stage);\r\n\r\n\r\n        colorEl.value = obj.prototype.getColor();\r\n        sizeEl.value = obj.prototype.getSize();\r\n        opacityEl.value = obj.prototype.getOpacity();\r\n\r\n    }\r\n\r\n    _layerClear() {\r\n        _stage.remove(GameConfig.MAIN_LAYER);\r\n        // GameConfig.MAIN_LAYER.clear();\r\n        if(GameConfig.MAIN_LAYER)\r\n        {\r\n            GameConfig.MAIN_LAYER.remove();\r\n            GameConfig.MAIN_LAYER.destroy();\r\n            GameConfig.MAIN_LAYER = null;\r\n        }\r\n        if(GameConfig.CURRENT_LAYER)\r\n        {\r\n            _stage.remove(GameConfig.CURRENT_LAYER);\r\n            GameConfig.CURRENT_LAYER.clear();\r\n            GameConfig.CURRENT_LAYER.remove();\r\n            GameConfig.CURRENT_LAYER.destroy();\r\n            GameConfig.CURRENT_LAYER = null;\r\n        }\r\n        _mainLayer = new Konva.Layer();\r\n        _stage.add(_mainLayer);\r\n        GameConfig.MAIN_LAYER = _mainLayer;\r\n        _mainLayer.draw();\r\n    }\r\n\r\n\r\n\r\n    _createImg() {\r\n        const imageURL = 'asset/image/sampleImg.jpg';\r\n        const layer = new Konva.Layer();\r\n        Konva.Image.fromURL(imageURL, (image)=>{\r\n\r\n            layer.add(image);\r\n            layer.draw();\r\n        });\r\n        _stage.add(layer);\r\n\r\n    }\r\n\r\n\r\n    _toolsDestroy() {\r\n        if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.destroy();\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/sketchBook/SketchBookKonva.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, isPaint, _line, _dashEnabled;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _dashConfigArr = [[0], [0, 0, 30], [0, 30]];\r\nlet _lineType = _dashConfigArr[0];\r\n\r\nexport default class LineDraw {\r\n\r\n    init(stage) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        _dashEnabled = false;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n    useTool() {\r\n        _stage.on('mousedown touchstart', function () {\r\n            isPaint = true;\r\n            let pos = _stage.getPointerPosition();\r\n            _line = new Konva.Line({\r\n                points: [pos.x, pos.y, pos.x, pos.y],\r\n                // pointerLength: 20,\r\n                // pointerWidth: 20,\r\n                lineCap:'round',\r\n                opacity:_this.getOpacity() / 100,\r\n                stroke: _this.getColor(),\r\n                strokeWidth: _this.getSize(),\r\n                dashEnabled: _dashEnabled,\r\n                dash:_this.getLineType()\r\n            });\r\n            _drawLayer.add(_line);\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', ()=> {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = _stage.getPointerPosition();\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n\r\n            isPaint = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', function () {\r\n\r\n            // if(!GameConfig.IS_LINE_DRAWING || !isPaint) return;\r\n            if(!isPaint) return;\r\n\r\n            let pos = _stage.getPointerPosition();\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            let oldPoints = _line.points();\r\n            _line.points([oldPoints[0], oldPoints[1], pos.x, pos.y])\r\n            _drawLayer.draw();\r\n        });\r\n    }\r\n\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        isPaint = false;\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) {\r\n        _size = size;\r\n        _lineType.pop();\r\n        _lineType.push(_size * 2);\r\n    }\r\n    getSize() {return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(1, e.target.name.length + 1);\r\n        switch (type)\r\n        {\r\n            case 'stroke' :\r\n                _lineType = [0];\r\n                break;\r\n            case 'dot' :\r\n                _lineType = [0, this.getSize() * 2];\r\n                break;\r\n            case 'dash' :\r\n                _lineType = [0, 0, this.getSize() * 2];\r\n                break;\r\n            default :\r\n                _lineType = [0];\r\n                break;\r\n        }\r\n        _dashEnabled = type !== 'stroke';\r\n    }\r\n\r\n    getLineType() {return _lineType;}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/LineDraw.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _typeConfigArr = [[0,0], [0, 0, 15], [0, 10]];\r\nlet _img, _brushType,_clone, _shapeEnable;\r\nconst _imgObj = {w:0, h:0, r:0};\r\nconst _angleRatio = 4;\r\nlet _lineCap = 'round';\r\n\r\n\r\nexport default class Brush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        _shapeEnable = false;\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            if(! _shapeEnable)\r\n            {\r\n                currentLine = new Konva.Line({\r\n                    stroke: _this.getColor(),\r\n                    strokeWidth: _this.getSize(),\r\n                    points: [pos.x, pos.y],\r\n                    globalCompositeOperation:'source-over',\r\n                    lineCap:_this.getLineCap(),\r\n                    tension:GameConfig.DEFAULT_TENSION,\r\n                    opacity:_this.getOpacity() / 100\r\n                });\r\n\r\n                _drawLayer.add(currentLine);\r\n\r\n            }\r\n\r\n            else currentLine = {points:[pos.x, pos.y]}\r\n\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) return;\r\n            if(! _shapeEnable)\r\n            {\r\n                let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n                currentLine.points(newPoints);\r\n            }\r\n            else\r\n            {\r\n                let obj = _imgObj;\r\n                _img = new Konva.Rect({\r\n                    width:parseInt(obj.w  * this.getSize()),\r\n                    height:parseInt(obj.h * this.getSize()),\r\n                    rotation:obj.r,\r\n                    fill:_this.getColor(),\r\n                })\r\n\r\n                _img.cache();\r\n                this.imageDraw(pos.x, pos.y);\r\n            }\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n        _clone = _img.clone({\r\n            x:x,\r\n            y:y,\r\n            fill:_this.getColor(),\r\n        });\r\n\r\n        _clone.cache();\r\n        _drawLayer.add(_clone);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(1, e.target.name.length + 1);\r\n        switch (type)\r\n        {\r\n            case 'circle' :\r\n                this.setLineCap('round');\r\n                _shapeEnable = false;\r\n                break;\r\n            case 'rect' :\r\n                this.setLineCap('square');\r\n                _shapeEnable = false;\r\n                break;\r\n            case 'diamond' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1;\r\n                _imgObj.r = 45;\r\n                _shapeEnable = true;\r\n                break;\r\n            case 'column' :\r\n                _imgObj.w = 1/_angleRatio;\r\n                _imgObj.h = 1;\r\n                _imgObj.r = 0;\r\n                _shapeEnable = true;\r\n                break;\r\n            case 'row' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1/_angleRatio;\r\n                _imgObj.r = 0;\r\n                _shapeEnable = true;\r\n                break;\r\n            case 'slash' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1/_angleRatio;\r\n                _imgObj.r = -35;\r\n                _shapeEnable = true;\r\n                break;\r\n\r\n        }\r\n    }\r\n    getLineType() { return _brushType;}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Brush.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\n\r\n\r\nexport default class Airbrush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            // Start drawing\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = {points:[pos.x, pos.y]}\r\n            // _drawLayer.add(currentLine);\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            if (!isDrawing) {\r\n                return;\r\n            }\r\n\r\n            // If drawing, add new point to the current line object\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            // let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            // currentLine.points(newPoints);\r\n            this.imageDraw(pos.x, pos.y);\r\n\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            // End drawing\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        // the function will return pointer position relative to the passed node\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        // to detect relative position we need to invert transform\r\n        transform.invert();\r\n\r\n        // get pointer (say mouse or touch) position\r\n        let pos = node.getStage().getPointerPosition();\r\n\r\n        // now we find relative point\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n\r\n        let angle = Math.random() * Math.PI * 2;\r\n        let radius = Math.random() * this.getSize() / 2;\r\n        let xPos = x + Math.cos(angle) * radius;\r\n        let yPos = y + Math.sin(angle) * radius;\r\n        let c = this.getColor();\r\n        let r = (Math.random() * 10)/5;\r\n        for(let  i = 0; i<3; i++)\r\n        {\r\n            let rect = new Konva.Rect({\r\n                x:xPos,\r\n                y:yPos,\r\n                width:r,\r\n                height:r,\r\n                fill: c,\r\n                perfectDrawEnabled:false,\r\n                listening:false\r\n            });\r\n            _drawLayer.add(rect);\r\n            _drawLayer.batchDraw();\r\n        }\r\n\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Airbrush.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\nimport Utility from \"../util/utility\";\r\n\r\nlet _stage, _drawLayer, _this,_pattern, _clone;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE * 2;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet _crayonType = 0;\r\nlet _imgSrc = [\r\n    'asset/image/pattern/crayon0/pattern_0.png',\r\n    'asset/image/pattern/crayon1/pattern_1.png',\r\n    'asset/image/pattern/crayon2/pattern_2.png'];\r\n\r\n\r\nexport default class Crayon {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        this.getCrayonImage();\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = {points:[pos.x, pos.y]}\r\n            this.getSize();\r\n            this.getColor();\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            if (!isDrawing) return;\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            this.imageDraw(pos.x, pos.y);\r\n            _drawLayer.batchDraw();\r\n\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            // End drawing\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        // transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n\r\n        let obj = _pattern.attrs.image;\r\n        _clone = _pattern.clone({\r\n            x:x - obj.width/2,\r\n            y:y - obj.height/2,\r\n        });\r\n        _clone.cache();\r\n        _drawLayer.add(_clone);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) {_color = color;}\r\n    getColor() {\r\n        let c = Utility.hexToRgb(_color);\r\n        _pattern.filters([Konva.Filters.RGBA]);\r\n        _pattern.red(c.r);\r\n        _pattern.green(c.g);\r\n        _pattern.blue(c.b);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size * 2;}\r\n    getSize() {\r\n        let obj = _pattern.attrs.image;\r\n        obj.width = _size;\r\n        obj.height = _size;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(1, e.target.name.length + 1);\r\n        switch (type)\r\n        {\r\n            case 'cA' :\r\n                _crayonType = 0;\r\n                break;\r\n            case 'cB' :\r\n                _crayonType = 1;\r\n                break;\r\n            case 'cC' :\r\n                _crayonType = 2\r\n                break;\r\n            default :\r\n                _crayonType = 0;\r\n                break;\r\n        }\r\n        this.getCrayonImage();\r\n    }\r\n\r\n    getLineType() {return _crayonType;}\r\n\r\n    getCrayonImage() {\r\n        _pattern = new Image();\r\n        _pattern.onload =()=> {\r\n            let img = new Konva.Image({\r\n                image:_pattern,\r\n            });\r\n            _pattern = img;\r\n            _pattern.cache();\r\n        }\r\n        _pattern.src = _imgSrc[this.getLineType()];\r\n    }\r\n\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Crayon.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _this, _mode, _currentNum, _drawLayer, isDrawing, _lineCap;\r\nlet _lineArr = [];\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\n\r\nexport default class Eraser {\r\n\r\n\r\n    init(stage, drawLayer) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = drawLayer;\r\n        _this = this;\r\n\r\n        // _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n        isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // Start drawing\r\n            isDrawing = true;\r\n            // Create new line object\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = new Konva.Line({\r\n                stroke: _this.getColor(),\r\n                strokeWidth: _this.getSize(),\r\n                points: [pos.x, pos.y],\r\n                lineCap:'round',\r\n                tension:GameConfig.DEFAULT_TENSION,\r\n                opacity:_this.getOpacity() / 100,\r\n                globalCompositeOperation:'destination-out'\r\n            });\r\n            _drawLayer.add(currentLine);\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', () => {\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) {\r\n                return;\r\n            }\r\n\r\n            let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            currentLine.points(newPoints);\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            /*LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;*/\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    destroy() {\r\n        // console.log(\"eraseEND\")\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(str) {}\r\n    getLineType(str) {}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Eraser.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nconst _defaultViewPort = 1;\r\nconst _minimumViewPort = 50;\r\nconst _maximumViewPort = 200;\r\nlet _currentViewPort = 100;\r\nlet _stage, _drawLayer, _this;\r\nconst _zoomScale = [0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.25, 1.5, 1.75, 2];\r\nlet _zoomScope = 1;\r\n\r\nexport default class Zoom {\r\n\r\n    init(stage, drawLayer) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = drawLayer;\r\n        _this = this;\r\n        this.sizeSetMouse();\r\n    }\r\n\r\n    sizeSetMouse() {\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            evt.evt.preventDefault();\r\n            let oldScale = _zoomScale.indexOf(_stage.scaleX());\r\n            if(oldScale === _zoomScale.length - 1 || oldScale === 0) _zoomScope = -_zoomScope;\r\n            let newScale = _zoomScale[oldScale + _zoomScope];\r\n            this.scaleModify(newScale)\r\n            /*_stage.scale({x: newScale, y: newScale});\r\n              let mousePointTo = {\r\n                  x: _stage.getPointerPosition().x / oldScale - _stage.x() / oldScale,\r\n                  y: _stage.getPointerPosition().y / oldScale - _stage.y() / oldScale\r\n              };\r\n              let newPos = {\r\n                  x: -(mousePointTo.x - _stage.getPointerPosition().x / newScale) * newScale,\r\n                  y: -(mousePointTo.y - _stage.getPointerPosition().y / newScale) * newScale\r\n              };\r\n              console.log(mousePointTo, newPos, newScale)\r\n              _stage.position(newPos);*/\r\n        });\r\n    }\r\n\r\n    scaleModify(scale) {\r\n        _stage.scale({x: scale, y:scale})\r\n        _stage.draw();\r\n\r\n    }\r\n\r\n    destroy() {\r\n        if(_stage) _stage.off('mousedown touchstart');\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(point) {\r\n      /*  console.log(point)\r\n        if(_currentViewPort >= _minimumViewPort && _currentViewPort <= _maximumViewPort)\r\n        _currentViewPort = point;*/\r\n        _currentViewPort = point/100;\r\n        this.scaleModify(this.getSize());\r\n    }\r\n    getSize() { return _currentViewPort;}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Zoom.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nlet _stage;\r\nexport default class Move {\r\n\r\n    init (stage) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        GameConfig.IS_DRAWING_MODE = false;\r\n        _stage = stage;\r\n        _stage.draggable(true);\r\n    }\r\n\r\n    destroy () {\r\n        if(_stage)_stage.draggable(false);\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Move.js","export default class ClearCanvas {\r\n    canvasClear(canvas) {\r\n        // alert(\"are you sure?\");\r\n        canvas.clear();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/ClearCanvas.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, _patternImage, _patternGroup, _fillRect;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet _lineCap = 'round';\r\nlet _patternType = 'A';\r\nconst _patterUrl = 'asset/image/screenTone/screenToneType';\r\n\r\n\r\n\r\nexport default class Brush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            _patternImage = new Image();\r\n            // _patternImage.src = 'asset/image/screenTone/screenToneTypeA.png';\r\n            _patternImage.src = this.getLineType();\r\n            _patternImage.onload = () => {\r\n                _patternGroup = new Konva.Group();\r\n                _drawLayer.add(_patternGroup);\r\n\r\n                currentLine = new Konva.Line({\r\n                    stroke: _this.getColor(),\r\n                    strokeWidth: _this.getSize(),\r\n                    points: [pos.x, pos.y],\r\n                    lineCap:_this.getLineCap(),\r\n                    tension:GameConfig.DEFAULT_TENSION,\r\n                    fill:'#ffcc00',\r\n                    opacity:_this.getOpacity() / 100\r\n                });\r\n\r\n                _fillRect = new Konva.Rect({\r\n                    x:0,\r\n                    y:0,\r\n                    width:800,\r\n                    height:550,\r\n                    fillPatternImage: _patternImage,\r\n                    globalCompositeOperation: 'source-in'\r\n                });\r\n\r\n                isDrawing = true;\r\n            };\r\n\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) return;\r\n            let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            currentLine.points(newPoints);\r\n\r\n            _patternGroup.add(currentLine);\r\n            _drawLayer.add(_fillRect);\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(2, e.target.name.length + 1);\r\n        _patternType = type;\r\n    }\r\n    getLineType() {\r\n        let url = _patterUrl + _patternType + '.png';\r\n        return url;\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/ScreenTone.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, _textarea, _textNode;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _defaultText = '글을 입력하세요';\r\n// const _defaultText = '글을';\r\nconst _fontFamily = [\r\n    'Nanum Brush Script',\r\n    'Nanum Pen Script',\r\n    'NanumBarunGothic',\r\n    'NanumBarunGothic YetHangul',\r\n    'NanumBarunpen',\r\n    'NanumGothic',\r\n    'NanumGothic Eco',\r\n    'NanumGothicCoding',\r\n    'NanumMyeongjo',\r\n    'NanumMyeongjo Eco',\r\n    'NanumMyeongjo YetHangul',\r\n    'NanumSquare',\r\n    'NanumSquare_ac',\r\n    'NanumSquareRound',\r\n]\r\n\r\nexport default class TextInput {\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = !isDrawing;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            let ff = _fontFamily[0];\r\n            if(isDrawing)\r\n            {\r\n                _textNode = new Konva.Text({\r\n                    // text: _defaultText,\r\n                    x: pos.x,\r\n                    y: pos.y,\r\n                    fontSize: this.getSize(),\r\n                    fontFamily: ff,\r\n                    fill: this.getColor()\r\n                });\r\n\r\n                _drawLayer.add(_textNode);\r\n\r\n                let stageBox = _stage.getContainer().getBoundingClientRect();\r\n                let areaPosition = {\r\n                    x: pos.x + stageBox.left,\r\n                    y: pos.y + stageBox.top\r\n                };\r\n\r\n                _textarea = document.createElement('textarea');\r\n                document.body.appendChild(_textarea);\r\n\r\n                _textarea.value = _textNode.text();\r\n                _textarea.style.position = 'absolute';\r\n                _textarea.style.top = areaPosition.y + 'px';\r\n                _textarea.style.left = areaPosition.x + 'px';\r\n                // _textarea.style.width = _textNode.width() + 'px';\r\n                _textarea.style.width = '30px';\r\n                _textarea.style.height = _textNode.height() + 'px';\r\n                _textarea.focus();\r\n                _textarea.addEventListener('input', this.updateValue);\r\n\r\n            }\r\n            else\r\n            {\r\n                // _textNode.text(_textarea.value);\r\n                document.body.removeChild(_textarea);\r\n                // _drawLayer.add(_textNode);\r\n                // _drawLayer.draw();\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    updateValue() {\r\n\r\n        // _textNode.text(_textarea.value);\r\n        // _textarea.style.position = 'absolute';\r\n        // _textarea.style.top = areaPosition.y + 'px';\r\n        // _textarea.style.left = areaPosition.x + 'px';\r\n        _textarea.style.width = _textNode.width() + 'px';\r\n        _textarea.style.height = _textNode.height() + 'px';\r\n\r\n        // console.log(_textarea.value);\r\n\r\n        if(_textarea.value)\r\n        {\r\n            _textNode.text(_textarea.value);\r\n            _drawLayer.draw();\r\n        }\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    textInput(x, y) {\r\n        let text = new Konva.Text({\r\n            x: x,\r\n            y: y,\r\n            text: '나눔스퀘어',\r\n            fontSize: 30,\r\n            fontFamily: '나눔고딕',\r\n            // fontFamily: '나눔스퀘어',\r\n            fill: this.getColor()\r\n        });\r\n        _drawLayer.add(text);\r\n        _drawLayer.batchDraw();\r\n\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_textarea) document.body.removeChild(_textarea);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/TextInput.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\nimport Utility from \"../util/utility\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet g_imgData, g_canvasWidth, g_targetColor;\r\n\r\nexport default class FloodFillBack {\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = GameConfig.MAIN_LAYER;\r\n        _this = this;\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n        let isDrawing = false;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            let color = Utility.hexToRgb(this.getColor());\r\n            this.paintAt(_drawLayer, color, pos.x, pos.y);\r\n\r\n        });\r\n    }\r\n\r\n    paintAt(ctx, targetColor, startX, startY) {\r\n\r\n        g_targetColor = targetColor;\r\n        g_canvasWidth = ctx.canvas.width;\r\n        g_imgData = ctx.canvas.context._context.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n        let pixelPos = (startY * g_canvasWidth + startX) * 4,\r\n            r = g_imgData.data[pixelPos],\r\n            g = g_imgData.data[pixelPos + 1],\r\n            b = g_imgData.data[pixelPos + 2],\r\n            a = g_imgData.data[pixelPos + 3];\r\n\r\n        if (r === g_targetColor.r && g === g_targetColor.g && b === g_targetColor.b && a === g_targetColor.a) {\r\n            // Return because trying to fill with the same color\r\n            return null;\r\n        }\r\n\r\n        this.floodFill(ctx, startX, startY, r, g, b, a);\r\n\r\n        // ctx.putImageData(g_imgData, 0, 0);\r\n        _drawLayer.canvas.context.putImageData(g_imgData,0,0);\r\n        g_imgData = null;\r\n    }\r\n\r\n    floodFill(ctx, startX, startY, startR, startG, startB, startA) {\r\n        let canvasWidth = g_canvasWidth,\r\n            newPos,\r\n            x,\r\n            y,\r\n            pixelPos,\r\n            reachLeft,\r\n            reachRight,\r\n            drawingBoundLeft = 0,\r\n            drawingBoundTop = 0,\r\n            drawingBoundRight = ctx.canvas.width,\r\n            drawingBoundBottom = ctx.canvas.height,\r\n            pixelStack = [[startX, startY]];\r\n\r\n        while (pixelStack.length) {\r\n\r\n            newPos = pixelStack.pop();\r\n            x = newPos[0];\r\n            y = newPos[1];\r\n\r\n            // Get current pixel position\r\n            pixelPos = (y * canvasWidth + x) * 4;\r\n\r\n            // Go up as long as the color matches and are inside the canvas\r\n            while (y > drawingBoundTop && this.matchStartColor(pixelPos, startR, startG, startB, startA)) {\r\n                y -= 1;\r\n                pixelPos -= canvasWidth * 4;\r\n            }\r\n\r\n            pixelPos += canvasWidth * 4;\r\n            y += 1;\r\n            reachLeft = false;\r\n            reachRight = false;\r\n\r\n            // Go down as long as the color matches and in inside the canvas\r\n            while (y < drawingBoundBottom && this.matchStartColor(pixelPos, startR, startG, startB, startA)) {\r\n                y += 1;\r\n\r\n                this.colorPixel(pixelPos);\r\n\r\n                if (x > drawingBoundLeft) {\r\n                    if (this.matchStartColor(pixelPos - 4, startR, startG, startB, startA)) {\r\n                        if (!reachLeft) {\r\n                            // Add pixel to stack\r\n                            pixelStack.push([x - 1, y]);\r\n                            reachLeft = true;\r\n                        }\r\n                    } else if (reachLeft) {\r\n                        reachLeft = false;\r\n                    }\r\n                }\r\n\r\n                if (x < drawingBoundRight) {\r\n                    if (this.matchStartColor(pixelPos + 4, startR, startG, startB, startA)) {\r\n                        if (!reachRight) {\r\n                            // Add pixel to stack\r\n                            pixelStack.push([x + 1, y]);\r\n                            reachRight = true;\r\n                        }\r\n                    } else if (reachRight) {\r\n                        reachRight = false;\r\n                    }\r\n                }\r\n\r\n                pixelPos += canvasWidth * 4;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    matchStartColor(pixelPos, startR, startG, startB, startA) {\r\n        const arr = g_imgData.data;\r\n        return (\r\n            startR === arr[pixelPos] &&\r\n            startG === arr[pixelPos + 1] &&\r\n            startB === arr[pixelPos + 2] &&\r\n            startA === arr[pixelPos + 3]\r\n        );\r\n    }\r\n\r\n    colorPixel(pixelPos) {\r\n        const arr = g_imgData.data;\r\n        arr[pixelPos] = g_targetColor.r;\r\n        arr[pixelPos + 1] = g_targetColor.g;\r\n        arr[pixelPos + 2] = g_targetColor.b;\r\n        arr[pixelPos + 3] = 255;\r\n    }\r\n\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/FloodFill.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nlet _cursorPointer, _stage, _layer, _size;\r\nconst _strokeWidth = 2;\r\nexport default class Cursor {\r\n    constructor(stage, layer, tool = 'brush', size = '10') {\r\n        _stage = stage;\r\n        _layer = layer;\r\n        _size = size;\r\n        _stage.container().style.cursor =  'crosshair';\r\n        // stage.container().style.cursor = 'url(images/my-cursor.png), auto';\r\n\r\n    }\r\n\r\n    _drawRect(radius,x= 0, y= 0) {\r\n        _cursorPointer = new Konva.Circle({\r\n            x: x,\r\n            y: y,\r\n            radius: parseInt(radius / 1.5),\r\n            stroke: 'white',\r\n            strokeWidth: _strokeWidth,\r\n        })\r\n        _layer.add(_cursorPointer);\r\n    }\r\n\r\n    _move(x, y) {\r\n        if(_cursorPointer)\r\n        {\r\n            if(x <= 0 || x >= GameConfig.STAGE_SIZE.width || y <= 0 || y >= GameConfig.STAGE_SIZE.height)\r\n            {\r\n                console.log(x, y)\r\n                _cursorPointer.visible(false);\r\n            }\r\n            else\r\n            {\r\n                _stage.container().style.cursor =  'crosshair';\r\n                _cursorPointer.x(x);\r\n                _cursorPointer.y(y);\r\n                _cursorPointer.visible(true);\r\n                _layer.draw();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    _destroy() {\r\n        if(_cursorPointer) {\r\n            _cursorPointer.destroy();\r\n            _layer.draw();\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Cursor.js"],"sourceRoot":""}