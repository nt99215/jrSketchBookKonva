{"version":3,"sources":["webpack:///webpack/bootstrap 5f5faa1398251d9fa5cd","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./src/data/GameConfig.js","webpack:///./src/manager/LayerManager.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./src/util/utility.js","webpack:///./src/index.js","webpack:///./src/sketchBook/SketchBookKonva.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./src/module/LineDraw.js","webpack:///./src/module/Brush.js","webpack:///./src/module/Airbrush.js","webpack:///./src/module/Crayon.js","webpack:///./src/module/Eraser.js","webpack:///./src/module/Zoom.js","webpack:///./src/module/Move.js","webpack:///./src/module/ClearCanvas.js","webpack:///./src/module/ScreenTone.js","webpack:///./src/module/TextInput.js","webpack:///./src/module/FloodFill.js","webpack:///./src/ui/Cursor.js"],"names":["_tool","_isDrawingMode","_isLineDrawing","_selectedColor","_selectedSize","_drawingHistory","_historyLimit","_defaultTension","_defaultBrushSize","_defaultLineSize","_defaultEraserSize","_defaultColor","_defaultOpacity","_mainStage","_mainDrawLayer","_currentLayer","_drawCursor","_stageSize","width","height","GameConfig","obj","bool","str","push","LayerManager","currentLayer","MAIN_LAYER","img","Konva","Image","image","canvas","_canvas","STAGE_SIZE","add","draw","MAIN_STAGE","remove","Utility","r","g","b","rgbToHex","map","hex","x","toString","length","join","replace","m","substring","match","parseInt","console","log","document","createElement","getContext","hexType","value","a","s","SketchBookKonva","_id","_stage","_mainLayer","_cursorLayer","$","id","getElementById","toolsOption","brushEl","airBrushEl","crayonEl","fillEl","lineEl","screenToneEl","eraserEl","textEl","zoomEl","clearEl","moveEl","colorEl","sizeEl","opacityEl","zoomSlider","brushTypeEl","eraserTypeEl","lineTypeEl","crayonTypeEl","screenToneTypeEl","_elementArr","el","Brush","Airbrush","Crayon","FloodFill","LineDraw","ScreenTone","TextInput","Eraser","Zoom","Move","ClearCanvas","layer","_init","Stage","container","Layer","DRAW_CURSOR","Cursor","onchange","CURRENT_TOOL","setColor","setSize","setOpacity","getOpacity","constructor","name","i","eL","o","onclick","_toolSelect","e","setLineType","_layerClear","_toolsDestroy","IS_DRAWING_MODE","prototype","init","getColor","getSize","destroy","CURRENT_LAYER","clear","imageURL","fromURL","_drawLayer","_this","isPaint","_line","_dashEnabled","_color","DEFAULT_COLOR","_size","DEFAULT_LINE_SIZE","_opacity","DEFAULT_OPACITY","_dashConfigArr","_lineType","stage","_drawRect","useTool","on","pos","getPointerPosition","Line","points","y","lineCap","opacity","stroke","strokeWidth","dashEnabled","dash","getLineType","_destroy","_move","oldPoints","off","color","size","pop","type","target","substr","_typeConfigArr","_img","_brushType","_clone","_shapeEnable","_imgObj","w","h","_angleRatio","_lineCap","isDrawing","currentLine","evt","getRelativePointerPosition","globalCompositeOperation","getLineCap","tension","DEFAULT_TENSION","newPoints","concat","Rect","rotation","fill","cache","imageDraw","batchDraw","node","transform","getAbsoluteTransform","copy","invert","getStage","point","clone","String","setLineCap","angle","Math","random","PI","radius","xPos","cos","yPos","sin","c","rect","perfectDrawEnabled","listening","_pattern","_crayonType","_imgSrc","getCrayonImage","attrs","hexToRgb","filters","Filters","RGBA","red","green","blue","onload","src","_mode","_currentNum","_lineArr","drawLayer","_defaultViewPort","_minimumViewPort","_maximumViewPort","_currentViewPort","_zoomScale","_zoomScope","sizeSetMouse","preventDefault","oldScale","indexOf","scaleX","newScale","scaleModify","scale","draggable","_patternImage","_patternGroup","_fillRect","_patternType","_patterUrl","Group","fillPatternImage","url","_textarea","_textNode","_defaultText","_fontFamily","ff","Text","fontSize","fontFamily","stageBox","getContainer","getBoundingClientRect","areaPosition","left","top","body","appendChild","text","style","position","focus","addEventListener","updateValue","removeChild","g_imgData","g_canvasWidth","g_targetColor","FloodFillBack","paintAt","ctx","targetColor","startX","startY","context","_context","getImageData","pixelPos","data","floodFill","putImageData","startR","startG","startB","startA","canvasWidth","newPos","reachLeft","reachRight","drawingBoundLeft","drawingBoundTop","drawingBoundRight","drawingBoundBottom","pixelStack","matchStartColor","colorPixel","arr","_cursorPointer","_layer","_strokeWidth","tool","cursor","Circle","visible"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5f5faa1398251d9fa5cd","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = 0\n// module chunks = 0","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/createClass.js\n// module id = 1\n// module chunks = 0","let _tool = null;\r\nlet _isDrawingMode = false;\r\nlet _isLineDrawing = false;\r\nlet _selectedColor = '';\r\nlet _selectedSize = 0;\r\nlet _drawingHistory = [];\r\nconst _historyLimit = 30;\r\n\r\nconst _defaultTension = 0.3;\r\nconst _defaultBrushSize = 10;\r\nconst _defaultLineSize = 15;\r\nconst _defaultEraserSize = 15;\r\nconst _defaultColor = '#000000';\r\nconst _defaultOpacity = 100;\r\n\r\nlet _mainStage = null;\r\nlet _mainDrawLayer = null;\r\nlet _currentLayer = null;\r\nlet _drawCursor = null;\r\nlet _stageSize = {width:810, height:700}\r\n\r\nexport default class GameConfig {\r\n\r\n    static get MAIN_STAGE() { return _mainStage};\r\n    static set MAIN_STAGE(obj) { _mainStage = obj};\r\n\r\n    static get STAGE_SIZE() { return _stageSize};\r\n    static set STAGE_SIZE(obj) { _stageSize = obj};\r\n\r\n    static get MAIN_LAYER() { return _mainDrawLayer};\r\n    static set MAIN_LAYER(obj) { _mainDrawLayer = obj};\r\n\r\n    static get CURRENT_LAYER() { return _currentLayer};\r\n    static set CURRENT_LAYER(obj) { _currentLayer = obj};\r\n\r\n    static get DRAW_CURSOR() { return _drawCursor};\r\n    static set DRAW_CURSOR(obj) { _drawCursor = obj};\r\n\r\n    static get CURRENT_TOOL() { return _tool};\r\n    static set CURRENT_TOOL(obj) { _tool = obj};\r\n\r\n    static get DEFAULT_TENSION() { return _defaultTension};\r\n\r\n    static get IS_DRAWING_MODE() { return _isDrawingMode};\r\n    static set IS_DRAWING_MODE(bool) { _isDrawingMode = bool};\r\n\r\n    static get IS_LINE_DRAWING() { return _isLineDrawing};\r\n    static set IS_LINE_DRAWING(bool) { _isLineDrawing = bool};\r\n\r\n    static get SELECTED_COLOR() { return _selectedColor};\r\n    static set SELECTED_COLOR(str) { _selectedColor = str};\r\n\r\n    static get SELECTED_SIZE() { return _selectedSize};\r\n    static set SELECTED_SIZE(num) { _selectedSize = num}\r\n\r\n    static get SELECTED_SIZE() { return _drawingHistory};\r\n    static set SELECTED_SIZE(obj) { _drawingHistory.push(obj)};\r\n\r\n    static get DEFAULT_BRUSH_SIZE() { return _defaultBrushSize};\r\n    static get DEFAULT_LINE_SIZE() { return _defaultLineSize};\r\n    static get DEFAULT_ERASER_SIZE() { return _defaultEraserSize};\r\n    static get DEFAULT_COLOR() { return _defaultColor};\r\n    static get DEFAULT_OPACITY() { return _defaultOpacity};\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/data/GameConfig.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nexport default class LayerManager {\r\n        init(currentLayer) {\r\n        if(currentLayer === GameConfig.MAIN_LAYER)\r\n        return;\r\n        let _currentLayer = currentLayer;\r\n        let img = new Konva.Image({\r\n                image:_currentLayer.canvas._canvas,\r\n                width:GameConfig.STAGE_SIZE.width,\r\n                height:GameConfig.STAGE_SIZE.height\r\n        });\r\n        GameConfig.MAIN_LAYER.add(img);\r\n        GameConfig.MAIN_LAYER.draw();\r\n        // _currentLayer.destroy();\r\n        GameConfig.MAIN_STAGE.remove(_currentLayer);\r\n        // _currentLayer.clear();\r\n        _currentLayer.remove();\r\n        _currentLayer = null;\r\n        // console.log(\"GameConfig.MAIN_LAYER\", GameConfig.MAIN_LAYER);\r\n    }\r\n\r\n    stageUpdate() {\r\n        /* const scale = 1 / 4;\r\n         const url = _stage.toDataURL({ pixelRatio: scale });\r\n         document.getElementById('preview').src = url;*/\r\n\r\n        // let dataUrl = _drawLayer.toDataURL();\r\n        // this.downloadURI(dataUrl, 'stage.png');\r\n        // let json = _stage.toJSON();\r\n        // console.log(json);\r\n\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/manager/LayerManager.js","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 4\n// module chunks = 0","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 5\n// module chunks = 0","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 6\n// module chunks = 0","var core = module.exports = { version: '2.6.11' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 7\n// module chunks = 0","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 8\n// module chunks = 0","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 9\n// module chunks = 0","export default class Utility {\r\n\r\n    static newCtx(width, height) {\r\n        let canvas = document.createElement(\"canvas\");\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        return canvas.getContext(\"2d\");\r\n    }\r\n\r\n    static hexToRgb(hexType) {\r\n        let hex = hexType.replace( \"#\", \"\" );\r\n        let value = hex.match( /[a-f\\d]/gi );\r\n\r\n        // 헥사값이 세자리일 경우, 여섯자리로.\r\n        if ( value.length == 3 ) hex = value[0] + value[0] + value[1] + value[1] + value[2] + value[2];\r\n\r\n        value = hex.match( /[a-f\\d]{2}/gi );\r\n        let r = parseInt( value[0], 16 );\r\n        let g = parseInt( value[1], 16 );\r\n        let b = parseInt( value[2], 16 );\r\n\r\n        return {\r\n            r, g, b, a: 255\r\n        };\r\n    }\r\n\r\n    _rgbToHex(r,g,b) {\r\n\r\n        let rgbToHex = (r, g, b) => '#' + [r, g, b].map(x => {\r\n            const hex = x.toString(16)\r\n            return hex.length === 1 ? '0' + hex : hex\r\n        }).join('');\r\n\r\n        // console.log(rgbToHex)\r\n    }\r\n\r\n    _hexToRgb(hex) {\r\n        hex.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i\r\n            ,(m, r, g, b) => '#' + r + r + g + g + b + b)\r\n            .substring(1).match(/.{2}/g)\r\n            .map(x => parseInt(x, 16))\r\n\r\n        console.log(hex);\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/utility.js","import SketchBookKonva from \"./sketchBook/SketchBookKonva\";\r\nlet s = new SketchBookKonva('container');\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import LineDraw from \"../module/LineDraw\";\r\nimport Brush from \"../module/Brush\";\r\nimport GameConfig from \"../data/GameConfig\";\r\nimport Airbrush from \"../module/Airbrush\";\r\nimport Crayon from \"../module/Crayon\";\r\nimport Eraser from \"../module/Eraser\";\r\nimport Zoom from \"../module/Zoom\";\r\nimport Move from \"../module/Move\";\r\nimport ClearCanvas from \"../module/ClearCanvas\";\r\nimport ScreenTone from \"../module/ScreenTone\";\r\nimport TextInput from \"../module/TextInput\";\r\nimport FloodFill from \"../module/FloodFill\";\r\nimport Cursor from \"../ui/Cursor\";\r\n\r\nlet _id, _stage, _mainLayer, _cursorLayer;\r\n\r\nlet $ = function(id){return document.getElementById(id)};\r\nlet toolsOption = $('toolsOption'),\r\n    brushEl = $('brush'),\r\n    airBrushEl = $('airBrush'),\r\n    crayonEl = $('crayon'),\r\n    fillEl = $('fill'),\r\n    lineEl = $('line'),\r\n    screenToneEl = $('screenTone'),\r\n    eraserEl = $('eraser'),\r\n    textEl = $('text'),\r\n    zoomEl= $('zoom'),\r\n    // moveEl = $('move'),\r\n    clearEl = $('clear'),\r\n    moveEl = $('move'),\r\n\r\n    //tools Property\r\n    colorEl = $('_color'),\r\n    sizeEl = $('_size'),\r\n    opacityEl = $('_opacity'),\r\n    zoomSlider = $('_zoom'),\r\n\r\n\r\n    /**\r\n     * TOOLS TYPE\r\n     * @type {HTMLElement | jQuery | HTMLElement}\r\n     */\r\n        //BRUSH TYPE\r\n    brushTypeEl = $('brushType'),\r\n\r\n    //ERASER TYPE\r\n    eraserTypeEl = $('EraserType'),\r\n\r\n    //LINE TYPE\r\n    lineTypeEl = $('lineType'),\r\n\r\n    //CRAYON TYPE\r\n    crayonTypeEl = $('crayonType'),\r\n\r\n    //SCREEN_TONE TYPE\r\n    screenToneTypeEl = $('screenToneType')\r\n\r\nlet _elementArr = [\r\n    {el:brushEl, obj:Brush},\r\n    {el:airBrushEl, obj:Airbrush},\r\n    {el:crayonEl, obj:Crayon},\r\n    {el:fillEl, obj:FloodFill},\r\n    {el:lineEl, obj:LineDraw},\r\n    {el:screenToneEl, obj:ScreenTone},\r\n    {el:textEl, obj:TextInput},\r\n    {el:eraserEl, obj:Eraser},\r\n    {el:zoomEl, obj:Zoom},\r\n    {el:moveEl, obj:Move},\r\n    {el:clearEl, obj:ClearCanvas},\r\n]\r\n\r\nexport default class SketchBookKonva {\r\n    constructor(id, width, height, layer = 1) {\r\n        _id = id;\r\n        this._init();\r\n    }\r\n\r\n    _init() {\r\n\r\n        _stage = new Konva.Stage({\r\n            container: 'container',\r\n            width:GameConfig.STAGE_SIZE.width,\r\n            height:GameConfig.STAGE_SIZE.height\r\n        });\r\n\r\n        GameConfig.MAIN_STAGE = _stage;\r\n\r\n        // this._createImg();\r\n\r\n        _mainLayer = new Konva.Layer();\r\n        GameConfig.MAIN_LAYER = _mainLayer;\r\n        _stage.add(_mainLayer);\r\n\r\n        _cursorLayer = new Konva.Layer();\r\n        _stage.add(_cursorLayer);\r\n\r\n        GameConfig.DRAW_CURSOR = new Cursor(_stage,_cursorLayer);\r\n\r\n\r\n\r\n        colorEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setColor(this.value);\r\n        }\r\n\r\n        sizeEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setSize(this.value);\r\n        }\r\n\r\n        opacityEl.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL)\r\n            {\r\n                GameConfig.CURRENT_TOOL.setOpacity(this.value);\r\n                GameConfig.CURRENT_TOOL.getOpacity();\r\n            }\r\n        }\r\n\r\n        zoomSlider.onchange = function() {\r\n            if(GameConfig.CURRENT_TOOL.constructor.name === 'Zoom')\r\n                GameConfig.CURRENT_TOOL.setSize(this.value);\r\n        }\r\n\r\n\r\n        /**TOOLS SELECT\r\n         *\r\n         */\r\n        for(let i in _elementArr)\r\n        {\r\n            let eL = _elementArr[i].el;\r\n            let o =  _elementArr[i].obj;\r\n            eL.onclick =()=> this._toolSelect(eL.id, o);\r\n        }\r\n\r\n        /**\r\n         * BRUSH STYLE\r\n         */\r\n        brushTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * LINE STYLE\r\n         */\r\n        lineTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * CRAYON STYLE\r\n         */\r\n        crayonTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        /**\r\n         * CRAYON STYLE\r\n         */\r\n        screenToneTypeEl.onchange = function(e) {\r\n            if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.setLineType(e);\r\n        }\r\n\r\n        this._toolSelect();\r\n\r\n    }\r\n\r\n\r\n    _toolSelect(id = '', obj =  Brush) {\r\n        // toolsOption.style.display = 'none';\r\n        // brushTypeEl.style.display = '';\r\n\r\n        if(id === 'clear')\r\n        {\r\n            this._layerClear();\r\n            return;\r\n        }\r\n        this._toolsDestroy();\r\n\r\n        if(id === 'zoom' || id === 'move')\r\n        {\r\n            GameConfig.IS_DRAWING_MODE = false;\r\n            obj.prototype.init(_stage);\r\n            return;\r\n        }\r\n\r\n\r\n        GameConfig.IS_DRAWING_MODE = true;\r\n        // this._toolsDestroy();\r\n\r\n        if(id === 'eraser') {\r\n            GameConfig.IS_DRAWING_MODE = false;\r\n            obj.prototype.init(_stage, _mainLayer);\r\n            return;\r\n        }\r\n        else obj.prototype.init(_stage);\r\n\r\n\r\n        colorEl.value = obj.prototype.getColor();\r\n        sizeEl.value = obj.prototype.getSize();\r\n        opacityEl.value = obj.prototype.getOpacity();\r\n\r\n    }\r\n\r\n    _layerClear() {\r\n        _stage.remove(GameConfig.MAIN_LAYER);\r\n        // GameConfig.MAIN_LAYER.clear();\r\n        if(GameConfig.MAIN_LAYER)\r\n        {\r\n            GameConfig.MAIN_LAYER.remove();\r\n            GameConfig.MAIN_LAYER.destroy();\r\n            GameConfig.MAIN_LAYER = null;\r\n        }\r\n        if(GameConfig.CURRENT_LAYER)\r\n        {\r\n            _stage.remove(GameConfig.CURRENT_LAYER);\r\n            GameConfig.CURRENT_LAYER.clear();\r\n            GameConfig.CURRENT_LAYER.remove();\r\n            GameConfig.CURRENT_LAYER.destroy();\r\n            GameConfig.CURRENT_LAYER = null;\r\n        }\r\n        _mainLayer = new Konva.Layer();\r\n        _stage.add(_mainLayer);\r\n        GameConfig.MAIN_LAYER = _mainLayer;\r\n        _mainLayer.draw();\r\n    }\r\n\r\n\r\n\r\n    _createImg() {\r\n        const imageURL = 'asset/image/sampleImg.jpg';\r\n        const layer = new Konva.Layer();\r\n        Konva.Image.fromURL(imageURL, (image)=>{\r\n\r\n            layer.add(image);\r\n            layer.draw();\r\n        });\r\n        _stage.add(layer);\r\n\r\n    }\r\n\r\n\r\n    _toolsDestroy() {\r\n        if(GameConfig.CURRENT_TOOL) GameConfig.CURRENT_TOOL.destroy();\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/sketchBook/SketchBookKonva.js","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/define-property.js\n// module id = 13\n// module chunks = 0","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/define-property.js\n// module id = 14\n// module chunks = 0","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.define-property.js\n// module id = 15\n// module chunks = 0","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 16\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 17\n// module chunks = 0","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 18\n// module chunks = 0","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 19\n// module chunks = 0","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 20\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 21\n// module chunks = 0","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 22\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 23\n// module chunks = 0","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 24\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 25\n// module chunks = 0","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, isPaint, _line, _dashEnabled;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _dashConfigArr = [[0], [0, 0, 30], [0, 30]];\r\nlet _lineType = _dashConfigArr[0];\r\n\r\nexport default class LineDraw {\r\n\r\n    init(stage) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        _dashEnabled = false;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n    useTool() {\r\n        _stage.on('mousedown touchstart', function () {\r\n            isPaint = true;\r\n            let pos = _stage.getPointerPosition();\r\n            _line = new Konva.Line({\r\n                points: [pos.x, pos.y, pos.x, pos.y],\r\n                // pointerLength: 20,\r\n                // pointerWidth: 20,\r\n                lineCap:'round',\r\n                opacity:_this.getOpacity() / 100,\r\n                stroke: _this.getColor(),\r\n                strokeWidth: _this.getSize(),\r\n                dashEnabled: _dashEnabled,\r\n                dash:_this.getLineType()\r\n            });\r\n            _drawLayer.add(_line);\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', ()=> {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = _stage.getPointerPosition();\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n\r\n            isPaint = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', function () {\r\n\r\n            // if(!GameConfig.IS_LINE_DRAWING || !isPaint) return;\r\n            if(!isPaint) return;\r\n\r\n            let pos = _stage.getPointerPosition();\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            let oldPoints = _line.points();\r\n            _line.points([oldPoints[0], oldPoints[1], pos.x, pos.y])\r\n            _drawLayer.draw();\r\n        });\r\n    }\r\n\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        isPaint = false;\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) {\r\n        _size = size;\r\n        _lineType.pop();\r\n        _lineType.push(_size * 2);\r\n    }\r\n    getSize() {return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(1, e.target.name.length + 1);\r\n        switch (type)\r\n        {\r\n            case 'stroke' :\r\n                _lineType = [0];\r\n                break;\r\n            case 'dot' :\r\n                _lineType = [0, this.getSize() * 2];\r\n                break;\r\n            case 'dash' :\r\n                _lineType = [0, 0, this.getSize() * 2];\r\n                break;\r\n            default :\r\n                _lineType = [0];\r\n                break;\r\n        }\r\n        _dashEnabled = type !== 'stroke';\r\n    }\r\n\r\n    getLineType() {return _lineType;}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/LineDraw.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _typeConfigArr = [[0,0], [0, 0, 15], [0, 10]];\r\nlet _img, _brushType,_clone, _shapeEnable;\r\nconst _imgObj = {w:0, h:0, r:0};\r\nconst _angleRatio = 4;\r\nlet _lineCap = 'round';\r\n\r\n\r\nexport default class Brush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        _shapeEnable = false;\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            if(! _shapeEnable)\r\n            {\r\n                currentLine = new Konva.Line({\r\n                    stroke: _this.getColor(),\r\n                    strokeWidth: _this.getSize(),\r\n                    points: [pos.x, pos.y],\r\n                    globalCompositeOperation:'source-over',\r\n                    lineCap:_this.getLineCap(),\r\n                    tension:GameConfig.DEFAULT_TENSION,\r\n                    opacity:_this.getOpacity() / 100\r\n                });\r\n\r\n                _drawLayer.add(currentLine);\r\n\r\n            }\r\n\r\n            else currentLine = {points:[pos.x, pos.y]}\r\n\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) return;\r\n            if(! _shapeEnable)\r\n            {\r\n                let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n                currentLine.points(newPoints);\r\n            }\r\n            else\r\n            {\r\n                let obj = _imgObj;\r\n                _img = new Konva.Rect({\r\n                    width:parseInt(obj.w  * this.getSize()),\r\n                    height:parseInt(obj.h * this.getSize()),\r\n                    rotation:obj.r,\r\n                    fill:_this.getColor(),\r\n                })\r\n\r\n                _img.cache();\r\n                this.imageDraw(pos.x, pos.y);\r\n            }\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n        _clone = _img.clone({\r\n            x:x,\r\n            y:y,\r\n            fill:_this.getColor(),\r\n        });\r\n\r\n        _clone.cache();\r\n        _drawLayer.add(_clone);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(0, e.target.id.length);\r\n        type = String(type);\r\n        switch (type)\r\n        {\r\n            case '1' :\r\n                this.setLineCap('round');\r\n                _shapeEnable = false;\r\n                break;\r\n            case '2' :\r\n                this.setLineCap('square');\r\n                _shapeEnable = false;\r\n                break;\r\n            case '3' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1;\r\n                _imgObj.r = 45;\r\n                _shapeEnable = true;\r\n                break;\r\n            case '4' :\r\n                _imgObj.w = 1/_angleRatio;\r\n                _imgObj.h = 1;\r\n                _imgObj.r = 0;\r\n                _shapeEnable = true;\r\n                break;\r\n            case '5' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1/_angleRatio;\r\n                _imgObj.r = 0;\r\n                _shapeEnable = true;\r\n                break;\r\n            case '6' :\r\n                _imgObj.w = 1;\r\n                _imgObj.h = 1/_angleRatio;\r\n                _imgObj.r = -35;\r\n                _shapeEnable = true;\r\n                break;\r\n\r\n        }\r\n    }\r\n    getLineType() { return _brushType;}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Brush.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\n\r\n\r\nexport default class Airbrush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            // Start drawing\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = {points:[pos.x, pos.y]}\r\n            // _drawLayer.add(currentLine);\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            if (!isDrawing) {\r\n                return;\r\n            }\r\n\r\n            // If drawing, add new point to the current line object\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            // let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            // currentLine.points(newPoints);\r\n            this.imageDraw(pos.x, pos.y);\r\n\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            // End drawing\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        // the function will return pointer position relative to the passed node\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        // to detect relative position we need to invert transform\r\n        transform.invert();\r\n\r\n        // get pointer (say mouse or touch) position\r\n        let pos = node.getStage().getPointerPosition();\r\n\r\n        // now we find relative point\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n\r\n        let angle = Math.random() * Math.PI * 2;\r\n        let radius = Math.random() * this.getSize() / 2;\r\n        let xPos = x + Math.cos(angle) * radius;\r\n        let yPos = y + Math.sin(angle) * radius;\r\n        let c = this.getColor();\r\n        let r = (Math.random() * 10)/5;\r\n        for(let  i = 0; i<3; i++)\r\n        {\r\n            let rect = new Konva.Rect({\r\n                x:xPos,\r\n                y:yPos,\r\n                width:r,\r\n                height:r,\r\n                fill: c,\r\n                perfectDrawEnabled:false,\r\n                listening:false\r\n            });\r\n            _drawLayer.add(rect);\r\n            _drawLayer.batchDraw();\r\n        }\r\n\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Airbrush.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\nimport Utility from \"../util/utility\";\r\n\r\nlet _stage, _drawLayer, _this,_pattern, _clone;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE * 2;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet _crayonType = 0;\r\nlet _imgSrc = [\r\n    'asset/image/pattern/crayon0/pattern_0.png',\r\n    'asset/image/pattern/crayon1/pattern_1.png',\r\n    'asset/image/pattern/crayon2/pattern_2.png'];\r\n\r\n\r\nexport default class Crayon {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        this.getCrayonImage();\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // if(!GameConfig.IS_DRAWING_MODE) return;\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = {points:[pos.x, pos.y]}\r\n            this.getSize();\r\n            this.getColor();\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            if (!isDrawing) return;\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            this.imageDraw(pos.x, pos.y);\r\n            _drawLayer.batchDraw();\r\n\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            // End drawing\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        // transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    imageDraw(x, y) {\r\n\r\n        let obj = _pattern.attrs.image;\r\n        _clone = _pattern.clone({\r\n            x:x - obj.width/2,\r\n            y:y - obj.height/2,\r\n        });\r\n        _clone.cache();\r\n        _drawLayer.add(_clone);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) {_color = color;}\r\n    getColor() {\r\n        let c = Utility.hexToRgb(_color);\r\n        _pattern.filters([Konva.Filters.RGBA]);\r\n        _pattern.red(c.r);\r\n        _pattern.green(c.g);\r\n        _pattern.blue(c.b);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size * 2;}\r\n    getSize() {\r\n        let obj = _pattern.attrs.image;\r\n        obj.width = _size;\r\n        obj.height = _size;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(1, e.target.name.length + 1);\r\n        switch (type)\r\n        {\r\n            case 'cA' :\r\n                _crayonType = 0;\r\n                break;\r\n            case 'cB' :\r\n                _crayonType = 1;\r\n                break;\r\n            case 'cC' :\r\n                _crayonType = 2\r\n                break;\r\n            default :\r\n                _crayonType = 0;\r\n                break;\r\n        }\r\n        this.getCrayonImage();\r\n    }\r\n\r\n    getLineType() {return _crayonType;}\r\n\r\n    getCrayonImage() {\r\n        _pattern = new Image();\r\n        _pattern.onload =()=> {\r\n            let img = new Konva.Image({\r\n                image:_pattern,\r\n            });\r\n            _pattern = img;\r\n            _pattern.cache();\r\n        }\r\n        _pattern.src = _imgSrc[this.getLineType()];\r\n    }\r\n\r\n\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Crayon.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _this, _mode, _currentNum, _drawLayer, isDrawing, _lineCap;\r\nlet _lineArr = [];\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\n\r\nexport default class Eraser {\r\n\r\n\r\n    init(stage, drawLayer) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = drawLayer;\r\n        _this = this;\r\n\r\n        // _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n        isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            // Start drawing\r\n            isDrawing = true;\r\n            // Create new line object\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            currentLine = new Konva.Line({\r\n                stroke: _this.getColor(),\r\n                strokeWidth: _this.getSize(),\r\n                points: [pos.x, pos.y],\r\n                lineCap:'round',\r\n                tension:GameConfig.DEFAULT_TENSION,\r\n                opacity:_this.getOpacity() / 100,\r\n                globalCompositeOperation:'destination-out'\r\n            });\r\n            _drawLayer.add(currentLine);\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', () => {\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) {\r\n                return;\r\n            }\r\n\r\n            let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            currentLine.points(newPoints);\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            /*LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;*/\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    destroy() {\r\n        // console.log(\"eraseEND\")\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(str) {}\r\n    getLineType(str) {}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Eraser.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nconst _defaultViewPort = 1;\r\nconst _minimumViewPort = 50;\r\nconst _maximumViewPort = 200;\r\nlet _currentViewPort = 100;\r\nlet _stage, _drawLayer, _this;\r\nconst _zoomScale = [0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.25, 1.5, 1.75, 2];\r\nlet _zoomScope = 1;\r\n\r\nexport default class Zoom {\r\n\r\n    init(stage, drawLayer) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = drawLayer;\r\n        _this = this;\r\n        this.sizeSetMouse();\r\n    }\r\n\r\n    sizeSetMouse() {\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            evt.evt.preventDefault();\r\n            let oldScale = _zoomScale.indexOf(_stage.scaleX());\r\n            if(oldScale === _zoomScale.length - 1 || oldScale === 0) _zoomScope = -_zoomScope;\r\n            let newScale = _zoomScale[oldScale + _zoomScope];\r\n            this.scaleModify(newScale)\r\n            /*_stage.scale({x: newScale, y: newScale});\r\n              let mousePointTo = {\r\n                  x: _stage.getPointerPosition().x / oldScale - _stage.x() / oldScale,\r\n                  y: _stage.getPointerPosition().y / oldScale - _stage.y() / oldScale\r\n              };\r\n              let newPos = {\r\n                  x: -(mousePointTo.x - _stage.getPointerPosition().x / newScale) * newScale,\r\n                  y: -(mousePointTo.y - _stage.getPointerPosition().y / newScale) * newScale\r\n              };\r\n              console.log(mousePointTo, newPos, newScale)\r\n              _stage.position(newPos);*/\r\n        });\r\n    }\r\n\r\n    scaleModify(scale) {\r\n        _stage.scale({x: scale, y:scale})\r\n        _stage.draw();\r\n\r\n    }\r\n\r\n    destroy() {\r\n        if(_stage) _stage.off('mousedown touchstart');\r\n\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(point) {\r\n      /*  console.log(point)\r\n        if(_currentViewPort >= _minimumViewPort && _currentViewPort <= _maximumViewPort)\r\n        _currentViewPort = point;*/\r\n        _currentViewPort = point/100;\r\n        this.scaleModify(this.getSize());\r\n    }\r\n    getSize() { return _currentViewPort;}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Zoom.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nlet _stage;\r\nexport default class Move {\r\n\r\n    init (stage) {\r\n        GameConfig.CURRENT_TOOL = this;\r\n        GameConfig.IS_DRAWING_MODE = false;\r\n        _stage = stage;\r\n        _stage.draggable(true);\r\n    }\r\n\r\n    destroy () {\r\n        if(_stage)_stage.draggable(false);\r\n\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/Move.js","export default class ClearCanvas {\r\n    canvasClear(canvas) {\r\n        // alert(\"are you sure?\");\r\n        canvas.clear();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/ClearCanvas.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, _patternImage, _patternGroup, _fillRect;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet _lineCap = 'round';\r\nlet _patternType = 'A';\r\nconst _patterUrl = 'asset/image/screenTone/screenToneType';\r\n\r\n\r\n\r\nexport default class Brush {\r\n\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.DRAW_CURSOR._drawRect(this.getSize());\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n        let currentLine;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            _patternImage = new Image();\r\n            // _patternImage.src = 'asset/image/screenTone/screenToneTypeA.png';\r\n            _patternImage.src = this.getLineType();\r\n            _patternImage.onload = () => {\r\n                _patternGroup = new Konva.Group();\r\n                _drawLayer.add(_patternGroup);\r\n\r\n                currentLine = new Konva.Line({\r\n                    stroke: _this.getColor(),\r\n                    strokeWidth: _this.getSize(),\r\n                    points: [pos.x, pos.y],\r\n                    lineCap:_this.getLineCap(),\r\n                    tension:GameConfig.DEFAULT_TENSION,\r\n                    fill:'#ffcc00',\r\n                    opacity:_this.getOpacity() / 100\r\n                });\r\n\r\n                _fillRect = new Konva.Rect({\r\n                    x:0,\r\n                    y:0,\r\n                    width:GameConfig.STAGE_SIZE.width,\r\n                    height:GameConfig.STAGE_SIZE.height,\r\n                    fillPatternImage: _patternImage,\r\n                    globalCompositeOperation: 'source-in'\r\n                });\r\n\r\n                isDrawing = true;\r\n            };\r\n\r\n        });\r\n\r\n        _stage.on('mousemove touchmove', (evt) => {\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._move(pos.x, pos.y);\r\n            if (!isDrawing) return;\r\n            let newPoints = currentLine.points().concat([pos.x, pos.y]);\r\n            currentLine.points(newPoints);\r\n\r\n            _patternGroup.add(currentLine);\r\n            _drawLayer.add(_fillRect);\r\n            _drawLayer.batchDraw();\r\n        });\r\n\r\n        _stage.on('mouseup touchend contentTouchend', (evt) => {\r\n            GameConfig.DRAW_CURSOR._destroy();\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            GameConfig.DRAW_CURSOR._drawRect(this.getSize(), pos.x, pos.y);\r\n            isDrawing = false;\r\n            LayerManager.prototype.init(_drawLayer);\r\n            _drawLayer = new Konva.Layer();\r\n            _stage.add(_drawLayer);\r\n            GameConfig.CURRENT_LAYER = _drawLayer;\r\n        });\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n\r\n    /**\r\n     *\r\n     * @param lineCap\r\n     */\r\n    setLineCap(str) { _lineCap = str;}\r\n    getLineCap() { return _lineCap;}\r\n\r\n    /**\r\n     *\r\n     * @param linType\r\n     */\r\n    setLineType(e) {\r\n        let type = e.target.id.substr(2, e.target.name.length + 1);\r\n        _patternType = type;\r\n    }\r\n    getLineType() {\r\n        let url = _patterUrl + _patternType + '.png';\r\n        return url;\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/ScreenTone.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\n\r\nlet _stage, _drawLayer, _this, _textarea, _textNode;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nconst _defaultText = '글을 입력하세요';\r\n// const _defaultText = '글을';\r\nconst _fontFamily = [\r\n    'Nanum Brush Script',\r\n    'Nanum Pen Script',\r\n    'NanumBarunGothic',\r\n    'NanumBarunGothic YetHangul',\r\n    'NanumBarunpen',\r\n    'NanumGothic',\r\n    'NanumGothic Eco',\r\n    'NanumGothicCoding',\r\n    'NanumMyeongjo',\r\n    'NanumMyeongjo Eco',\r\n    'NanumMyeongjo YetHangul',\r\n    'NanumSquare',\r\n    'NanumSquare_ac',\r\n    'NanumSquareRound',\r\n]\r\n\r\nexport default class TextInput {\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = new Konva.Layer();\r\n        _stage.add(_drawLayer);\r\n        GameConfig.CURRENT_LAYER = _drawLayer;\r\n        _this = this;\r\n\r\n        this.useTool();\r\n    }\r\n\r\n\r\n    useTool () {\r\n\r\n        let isDrawing = false;\r\n\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = !isDrawing;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            let ff = _fontFamily[0];\r\n            if(isDrawing)\r\n            {\r\n                _textNode = new Konva.Text({\r\n                    // text: _defaultText,\r\n                    x: pos.x,\r\n                    y: pos.y,\r\n                    fontSize: this.getSize(),\r\n                    fontFamily: ff,\r\n                    fill: this.getColor()\r\n                });\r\n\r\n                _drawLayer.add(_textNode);\r\n\r\n                let stageBox = _stage.getContainer().getBoundingClientRect();\r\n                let areaPosition = {\r\n                    x: pos.x + stageBox.left,\r\n                    y: pos.y + stageBox.top\r\n                };\r\n\r\n                _textarea = document.createElement('textarea');\r\n                document.body.appendChild(_textarea);\r\n\r\n                _textarea.value = _textNode.text();\r\n                _textarea.style.position = 'absolute';\r\n                _textarea.style.top = areaPosition.y + 'px';\r\n                _textarea.style.left = areaPosition.x + 'px';\r\n                // _textarea.style.width = _textNode.width() + 'px';\r\n                _textarea.style.width = '30px';\r\n                _textarea.style.height = _textNode.height() + 'px';\r\n                _textarea.focus();\r\n                _textarea.addEventListener('input', this.updateValue);\r\n\r\n            }\r\n            else\r\n            {\r\n                // _textNode.text(_textarea.value);\r\n                document.body.removeChild(_textarea);\r\n                // _drawLayer.add(_textNode);\r\n                // _drawLayer.draw();\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    updateValue() {\r\n\r\n        // _textNode.text(_textarea.value);\r\n        // _textarea.style.position = 'absolute';\r\n        // _textarea.style.top = areaPosition.y + 'px';\r\n        // _textarea.style.left = areaPosition.x + 'px';\r\n        _textarea.style.width = _textNode.width() + 'px';\r\n        _textarea.style.height = _textNode.height() + 'px';\r\n\r\n        // console.log(_textarea.value);\r\n\r\n        if(_textarea.value)\r\n        {\r\n            _textNode.text(_textarea.value);\r\n            _drawLayer.draw();\r\n        }\r\n    }\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    textInput(x, y) {\r\n        let text = new Konva.Text({\r\n            x: x,\r\n            y: y,\r\n            text: '나눔스퀘어',\r\n            fontSize: 30,\r\n            fontFamily: '나눔고딕',\r\n            // fontFamily: '나눔스퀘어',\r\n            fill: this.getColor()\r\n        });\r\n        _drawLayer.add(text);\r\n        _drawLayer.batchDraw();\r\n\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_textarea) document.body.removeChild(_textarea);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n        if(_stage)_stage.off('mousemove touchmove');\r\n        if(_stage)_stage.off('mouseup touchend contentTouchend');\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/TextInput.js","import GameConfig from \"../data/GameConfig\";\r\nimport LayerManager from \"../manager/LayerManager\";\r\nimport Utility from \"../util/utility\";\r\n\r\nlet _stage, _drawLayer, _this;\r\nlet _color = GameConfig.DEFAULT_COLOR;\r\nlet _size = GameConfig.DEFAULT_LINE_SIZE;\r\nlet _opacity = GameConfig.DEFAULT_OPACITY;\r\nlet g_imgData, g_canvasWidth, g_targetColor;\r\n\r\nexport default class FloodFillBack {\r\n    init(stage) {\r\n\r\n        GameConfig.CURRENT_TOOL = this;\r\n        _stage = stage;\r\n        _drawLayer = GameConfig.MAIN_LAYER;\r\n        _this = this;\r\n        this.useTool();\r\n\r\n    }\r\n\r\n    useTool () {\r\n        let isDrawing = false;\r\n        _stage.on('mousedown touchstart', (evt) => {\r\n            isDrawing = true;\r\n            let pos = this.getRelativePointerPosition(_stage);\r\n            let color = Utility.hexToRgb(this.getColor());\r\n            this.paintAt(_drawLayer, color, pos.x, pos.y);\r\n\r\n        });\r\n    }\r\n\r\n    paintAt(ctx, targetColor, startX, startY) {\r\n\r\n        g_targetColor = targetColor;\r\n        g_canvasWidth = ctx.canvas.width;\r\n        g_imgData = ctx.canvas.context._context.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n        let pixelPos = (startY * g_canvasWidth + startX) * 4,\r\n            r = g_imgData.data[pixelPos],\r\n            g = g_imgData.data[pixelPos + 1],\r\n            b = g_imgData.data[pixelPos + 2],\r\n            a = g_imgData.data[pixelPos + 3];\r\n\r\n        if (r === g_targetColor.r && g === g_targetColor.g && b === g_targetColor.b && a === g_targetColor.a) {\r\n            // Return because trying to fill with the same color\r\n            return null;\r\n        }\r\n\r\n        this.floodFill(ctx, startX, startY, r, g, b, a);\r\n\r\n        // ctx.putImageData(g_imgData, 0, 0);\r\n        _drawLayer.canvas.context.putImageData(g_imgData,0,0);\r\n        g_imgData = null;\r\n    }\r\n\r\n    floodFill(ctx, startX, startY, startR, startG, startB, startA) {\r\n        let canvasWidth = g_canvasWidth,\r\n            newPos,\r\n            x,\r\n            y,\r\n            pixelPos,\r\n            reachLeft,\r\n            reachRight,\r\n            drawingBoundLeft = 0,\r\n            drawingBoundTop = 0,\r\n            drawingBoundRight = ctx.canvas.width,\r\n            drawingBoundBottom = ctx.canvas.height,\r\n            pixelStack = [[startX, startY]];\r\n\r\n        while (pixelStack.length) {\r\n\r\n            newPos = pixelStack.pop();\r\n            x = newPos[0];\r\n            y = newPos[1];\r\n\r\n            // Get current pixel position\r\n            pixelPos = (y * canvasWidth + x) * 4;\r\n\r\n            // Go up as long as the color matches and are inside the canvas\r\n            while (y > drawingBoundTop && this.matchStartColor(pixelPos, startR, startG, startB, startA)) {\r\n                y -= 1;\r\n                pixelPos -= canvasWidth * 4;\r\n            }\r\n\r\n            pixelPos += canvasWidth * 4;\r\n            y += 1;\r\n            reachLeft = false;\r\n            reachRight = false;\r\n\r\n            // Go down as long as the color matches and in inside the canvas\r\n            while (y < drawingBoundBottom && this.matchStartColor(pixelPos, startR, startG, startB, startA)) {\r\n                y += 1;\r\n\r\n                this.colorPixel(pixelPos);\r\n\r\n                if (x > drawingBoundLeft) {\r\n                    if (this.matchStartColor(pixelPos - 4, startR, startG, startB, startA)) {\r\n                        if (!reachLeft) {\r\n                            // Add pixel to stack\r\n                            pixelStack.push([x - 1, y]);\r\n                            reachLeft = true;\r\n                        }\r\n                    } else if (reachLeft) {\r\n                        reachLeft = false;\r\n                    }\r\n                }\r\n\r\n                if (x < drawingBoundRight) {\r\n                    if (this.matchStartColor(pixelPos + 4, startR, startG, startB, startA)) {\r\n                        if (!reachRight) {\r\n                            // Add pixel to stack\r\n                            pixelStack.push([x + 1, y]);\r\n                            reachRight = true;\r\n                        }\r\n                    } else if (reachRight) {\r\n                        reachRight = false;\r\n                    }\r\n                }\r\n\r\n                pixelPos += canvasWidth * 4;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    matchStartColor(pixelPos, startR, startG, startB, startA) {\r\n        const arr = g_imgData.data;\r\n        return (\r\n            startR === arr[pixelPos] &&\r\n            startG === arr[pixelPos + 1] &&\r\n            startB === arr[pixelPos + 2] &&\r\n            startA === arr[pixelPos + 3]\r\n        );\r\n    }\r\n\r\n    colorPixel(pixelPos) {\r\n        const arr = g_imgData.data;\r\n        arr[pixelPos] = g_targetColor.r;\r\n        arr[pixelPos + 1] = g_targetColor.g;\r\n        arr[pixelPos + 2] = g_targetColor.b;\r\n        arr[pixelPos + 3] = 255;\r\n    }\r\n\r\n\r\n    getRelativePointerPosition(node) {\r\n        let transform = node.getAbsoluteTransform().copy();\r\n        transform.invert();\r\n        let pos = node.getStage().getPointerPosition();\r\n        return transform.point(pos);\r\n    }\r\n\r\n    destroy () {\r\n        LayerManager.prototype.init(_drawLayer);\r\n        if(_stage)_stage.off('mousedown touchstart');\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param color\r\n     */\r\n    setColor(color) { _color = color;}\r\n    getColor() { return _color;}\r\n\r\n    /**\r\n     *\r\n     * @param size\r\n     */\r\n    setSize(size) { _size = size;}\r\n    getSize() { return _size;}\r\n\r\n    /**\r\n     *\r\n     * @param opacity\r\n     */\r\n    setOpacity(opacity) { _opacity = opacity;}\r\n    getOpacity() { return _opacity;}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/module/FloodFill.js","import GameConfig from \"../data/GameConfig\";\r\n\r\nlet _cursorPointer, _stage, _layer, _size;\r\nconst _strokeWidth = 2;\r\nexport default class Cursor {\r\n    constructor(stage, layer, tool = 'brush', size = '10') {\r\n        _stage = stage;\r\n        _layer = layer;\r\n        _size = size;\r\n        _stage.container().style.cursor =  'crosshair';\r\n        // stage.container().style.cursor = 'url(images/my-cursor.png), auto';\r\n\r\n    }\r\n\r\n    _drawRect(radius,x= 0, y= 0) {\r\n        _cursorPointer = new Konva.Circle({\r\n            x: x,\r\n            y: y,\r\n            radius: parseInt(radius / 1.5),\r\n            stroke: 'white',\r\n            strokeWidth: _strokeWidth,\r\n        })\r\n        _layer.add(_cursorPointer);\r\n    }\r\n\r\n    _move(x, y) {\r\n        if(_cursorPointer)\r\n        {\r\n            if(x <= 0 || x >= GameConfig.STAGE_SIZE.width || y <= 0 || y >= GameConfig.STAGE_SIZE.height)\r\n            {\r\n                console.log(x, y)\r\n                _cursorPointer.visible(false);\r\n            }\r\n            else\r\n            {\r\n                _stage.container().style.cursor =  'crosshair';\r\n                _cursorPointer.x(x);\r\n                _cursorPointer.y(y);\r\n                _cursorPointer.visible(true);\r\n                _layer.draw();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    _destroy() {\r\n        if(_cursorPointer) {\r\n            _cursorPointer.destroy();\r\n            _layer.draw();\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Cursor.js"],"sourceRoot":""}